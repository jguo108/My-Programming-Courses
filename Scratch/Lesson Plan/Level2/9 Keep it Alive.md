# 9 Keep it Alive

[Scratch coding projects for kids and teens | Grow a dragonfly (raspberrypi.org)](https://projects.raspberrypi.org/en/projects/grow-a-dragonfly)

### Objectives

### Background

We use **conditions** all the time to make decisions. We could say “if the pencil is blunt, then sharpen it”. `If` blocks and conditions let us write code that does something different depending on whether a condition is true or false.

**Dragonflies** can be found all over the world and have been around for over 300 million years!

Characters that move around on their own in games are sometimes called **mobs**, short for mobiles. Can you think of a game that has mobs?

The biggest living dragonflies can be found in Central America and have a wingspan of 19cm (a bit bigger than your hand). The largest insect ever known was **Meganeuropsis permiana**, a dragonfly with a wingspan of about 75cm (the size of a big footstep).

### Project

### What to learn

- How to make sprite follow the mouse pointer
- Event scheduler
- How to avoid two sprites touching each other repeatedly.
- A hidden sprite cannot touch other sprites
- Variable can be shown or hidden programmatically.
- Patter of change and reset
- In coding, less is better. Always find the solution with the least amount of code.

### Block

- point towards mouse pointer
- =
- if then
- not
- show/hide variable

### Lesson Plan

| Step | Details |
| --- | --- |
| Introduction | * We all know that we need to eat food everyday right? But do you really know why we need to eat? Well, ok, if we don’t eat we feel hungry. But why does mother nature makes us feel hungry if we don’t eat? Well, because eating is gonna keep us alive.
* An living creature, whether it is a small insect or a big blue whale, needs energy to walk, fly or swim. More importantly, we all need energy to keep our heart beating, to our muscle moving and to keep our brain thinking. And where does the energy comes from, well, it’s food! For insects, this could other smaller insects, for blue whales, this could be fish or shrimp. And for us human, you and me, this could be anything, burger, rice, noodle, whatever. 
* If we don’t eat, we will have less and less energy and imagine what is gonna happen if your heart stop beating because there is not enough energy.
* In today’s project, we are gonna create a game where you control a dragonfly to keep eating small insects in a jungle. While the dragonfly is doing that, its energy level keeps dropping because, you know, flying taking energy. On the other hand, each time the dragonfly eat an insect, its energy gets replenished. Once there is no more energy left, the dragonfly is dead and the game ends. And your task is keep it alive for as long as possible.
* OK, so let’s dive in.  |
| Setting up the Scene | * First, search in Scratch’s backdrop library and add the jungle backdrop.
* Then, search and add the dragon fly sprite. I think it’s a little bit too big, so when green flag clicked, let’s change its size to 30% |
| Dragonfly (mouse following) | * Ok, so we have a dragonfly, next we want the player to control its movement. Now, in the “Turtle Crossing” lesson, we have seen one way of controlling a sprite by pressing the arrow keys on the keyboard. In this lesson, we will learn another very common way to control a sprite: we want the sprite to follow our mouse around.
* Ok, you have jump in right now and say: “I know that! We have just learnt how to make a pencil following or mouse in last lesson”. Yes, you are are right and how about we trying that here?
* OK, so by know you should probably already know how to do it, but let’s do it together any way. After setting the size of the dragonfly, we make it go to the mouse pointer. Ok, quick question: do you think this code will work? Any idea? Yes, it will not? Can someone explain that? Yes, because it will only go to the mouse pointer once, but what we want is for the dragonfly to keep going to the mouse pointer forever! So, the fix is simple, let’s add a forever loop.
* Test. Ok, the dragonfly follows our mouse. So it works in a way.
* Problem: But let’s pause for a minute and think about what it really means by FOLLOWING. For example, let’s imagine a policeman following a thief. First of all, it needs to keep some distance from the thief, right? Because, obviously, you don’t want the thief to find out that he has been followed. Now how does policeman make sure that he doesn’t lose the thief? Well, the policeman would face in the direction of the thief and then move a few steps in that direction. Of course, the thief is not standing still and he’s also moving too. So the policeman needs to keep adjusting his direction and make sure he always points to the thief, then just keep moving to the thief. Now substitute the thief for the mouse pointer, and substitute the policeman for the dragonfly. You can immediately see the problem we have now, the dragonfly and the mouse pointer are very closed to each, actually they overlap most the time. Back the policeman example, you obviously don’t want the policeman and the thief right next to each other, right? You want to keep some distance so that the thief is not aware of the policeman. Also, as you can see, the dragonfly is not really changing its direction to point to where the mouse is going. For example, here I’m moving the mouse down, but the dragonfly still points up. To summarize, the code here works, but it can be make better.
* Solution: Actually, I have already told you how to make the following work better in the policeman example. Can anyone recall how you follow the thief? Yes, we first point to where he is, then move forward some steps. Ok, we know what needs to be done, the next question is do we have the blocks to do that? Do we have a block to point to the mouse pointer and do we have a block to move? Yes, sure. In the lesson “Catch the school” bus, we use block “point towards” for the Parrot to face the school bus. Now, take a look at this block again, in its dropdown menu, what other options do you see? Yes, there is a “mouse-pointer” option, and I have a feeling that this is what we need. Right, now we can face the mouse pointer, and how do we move? Well, that cannot be simpler and we have seen and used this many times by now, it is the “move” block. Let’s say move 5 steps each time. So we connect this two blocks, and this is the two steps we need to follow a thief or a mouse pointer. But of course, doing that just once is not gonna be enough, so let’s put them in the forever loop. We also need to delete the “go to mouse pointer” block.
* Test. Now see, this is what I would call a FOLLOW, the dragonfly keeps a distance from the mouse pointer, but always moves in its direction. Beautiful! |
| Dragonfly (wing sound) |  |
| Dragonfly (add “energy level”) | * Ok, as we talked about at the beginning of this lesson, every living creature needs energy to stay alive, so that it can move, fly or swim. Now same for the Dragonfly: it needs energy to fly around to catch insects, and by eating insects, it replenishes its energy to keep it flying for longer, and this keeps going on. And the goal of the game is to keep the dragonfly alive for as long as possible before its energy level drops to zero. 
* So in the last lesson, we have seen the use of variable. So, just a quick reminder, a variable is just like a box with a label. Now you can put anything into the box, so in real life, this would be fruit, snacks or your toy. When we code, we normally put numbers and text in to those variables. Now if you have a lot boxes, it can be hard to tell which one stores what. So you would label those boxes, such as fruit, snacks or toys. We can do the same for variables, but instead of sticking a label to it, we give them names. So in the “Paint it” lesson, we created a variable named “Width” to store the width of our pen. And the nice thing with variable is that you can change what is stored in side. Just imagine having a box of ping pong balls, let’s say initially you have ten in this box, then you can always add more or take our balls from the box. Then everytime I ask you how many balls there are in the box, you just need to count it and give me the number. This is why we can change the value of the ‘width’ variable to change the width of our pen.
* Now, think about the energy level of our dragonfly here, it goes up if insects are eaten, and it goes down as time goes by. Well, this sounds like a perfect case for some variable, right? So, let’s create one. Go to the Variables category, click “Make a variable”. We have seen this before, let’s give our variable a name, I would like to call it “energy level”. So we will not go into the details of the differences between “For all sprites” and “For this sprite only”,  this is for some later lesson. For now, “For all sprites” is fine. Then just click OK. Now, in our variable list, we have a new variable “energy level”. Again, you can show or hide it by toggling this checkout box on and off. For now, let’s make it visible to see its change better.
* OK, a variable needs to be given an initial value when the program starts. So, what do you think we should set energy level to at the beginning? Ok, yeah, so the answer is which ever you feel like! If the initial value is big, then the game will be easier, because it will probably take long for the energy to drop to 0 and gives the player more time to find and eat insects; if the the initial values is small, then the game is harder, because the player need to be quick to find and eat insects before time runs out. So when you create a game, you have to make such decisions all the time, it is not a good idea to make the game too simple or too hard, because it will make people lose interest very quickly. So how you do think you can make the level just right? Any idea? Well this will be an open question and see if you come up with something interesting after class.
* So back the project, here, I would set the energy level to 15 when the game starts. Still remember how to set the value for a variable? Yes, we can use the “set energy level to” block. Just need to change the value from 0 to 15.
* Test. Ok, when the game starts, we can clearly see that “energy level” has been set to 15. |
| Dragonfly (decrease “energy level”) | * Ok, so far so good. But our dragonfly has superpower now, because it doesn’t matter how long it has been flying, it’s energy level never drops. Let’s change that!
* So which block should we use to change a variable? Yes, the “change by” block. Now, our energy level is a number, and for a number, you can increase it or decrease it. In other words, make it bigger or smaller. So let’s take a look at the block, right now it says “change energy level by1”, if I run it, do you think it’s gonna increase or decrease “energy level”? Yes, energy level will increase. Let’s test, now you can see that energy level become bigger and bigger, essentially, it is adding one to energy level each time. But now as time goes by, we actually want energy level to decrease. How do you think we can do that? Well, if we have learnt maths, we know that to decrease a number, you substract an number from it, right? For variables, we can do that by changing it with a minus number, for example, -1. So minus number is just one with a minus sign in front of it. So if we change energy level by -1, we are essentially substracting one from the variable each time. If we test this, you can see, energy level is decreased by one each time we run the block.
* So we now know HOW to decrease the value of our “energy level” variable,  let’s think about WHEN we should reduce that value. Now, previously, I briefly mentioned that the energy level should decrease as time goes by. But what does that really mean? Now, I use some some kind of app to plan my daily activities from 9am to 6pm. I let it send me an event reminder every hour. For example, at 9am the app would send me a message saying ”hey it’s time to work on your lesson plan”, at 10am, it would send me another message saying “hey, it’s time to get online and deliver a Scratch lesson”, then at 3pm in the afternoon, it would send me a message saying “hey it’s time to  have tea break” so on and so forth. The point is, as the day goes by, the app is going to remind me to do something at a regular time interval, in this case, it’s once every hour.
* Now back to the dragonfly, we would also like something similar to the app so that it also sends out a message to the dragonfly at regular time interval, saying something like “hey, it’s time to decrease your energy level”. Once the dragonfly receives this message, it uses the “change by” block to reduce its energy level. Now, you can set the interval to anything, in my daily plan example, the app sends out a reminder every one hour. But that is probably too long here, because it’ gonna take very long for the energy level to drop each time and a game like this won’t be very interesting or challenging. So we might want to make the interval much shorted, for example, one second. 
* Next, we would like something in our game to play the role of my planning app, something that can send out a message at regular time interval. Now there are three options here, one is to create another sprite for that, the second option is just to add the code in the Dragonfly sprite itself, and the final option is to add the code to the Stage. Now there is no right or wrong choice here, actually, I will ask you to explore the first two options as an after-class exercise. Here I will choose the final option, that is to add the code to the Stage.
* Ok, let’s switch to the Stage code and add a when flag clicked block.
* Here, we want the stage to send out a message at regular interval to tell the Dragonfly to reduce its energy level again and again. Ok, let me repeat that again,  we want the stage to send out a message to tell the Dragonfly to reduce its energy level again and again. What important information can you extract from what I have just said? Yes, “send out a message”, “regular interval” and “again and again”. So let’s take a look at these three pieces of information one by one. How can you send out a message? Yes, broadcast! Let’s a broadcast block. What message should we send? Well, the exact message doesn’t really matter, as long as it’s something like “decrease energy level”. So why not just called “decrease energy level”? Ok, next, how we send out this message again and again? Yes, we can use a forever loop! So let’s put the broadcast block inside this loop. Ok, last one, how do we add the time interval? Any idea? Yes we can wait after each broadcast, and how do we wait? Yes, use the wait block. So let wait for one second.
* Test. Ok, nothing changes, the energy level is still always at 15. Any idea? Yes, because it has not received that message and reduce the energy level yet. Just like even if my app sends me a message saying “it’s time to give your lovely students a Scratch lesson”, I won’t be doing that if I somehow miss that message.
* So we need our dragonfly to receive that message and respond to it. How do we receive a message? Yeah, by now you should have already seen this many times,  we use the “When I receive” block and select the “Decrease energy level” message. And what should the dragon fly do after receiving this message? Yes, it should decrease its energy level by one using the “change variable by” block and passing number -1.
* Test. Nice, now, as the dragonfly keeps flying, its energy level keeps dropping from15 to 14 to….oopoo, when it reaches 0, it still keeps dropping below 0. I’m not even sure what an energy level below zero really means. Ideally, once it drops to 0, it means no more energy left, the dragonfly is not alive any more so the game should end.
* So once again, we need to make decision here: if energy level is 0, then we should the game, else we don’t need to do anything and just let game continues. Ok, sound familiar, if something happens, then do something, else, do other things. Yes, we use that in the last lesson “Paint it” do check if the mouse is down or not. If it is down, we put the pen down, and else, we put the pen up. So here, let’s use the “if then else” block. Now, what is condition that we want to check? Yes, we want to check if “energy level” is zero or not. So in the last lesson, we have learnt how to compare two numbers to see which one is bigger. We used the greater than block in the Operators Category. Now, to check if “energy level” is zero or not, we just need to see if “energy level” is equal to 0. Can you find a block to do that? Yes, the “equal” block! It is also a condition with a diamond shape. So we can put it into the diamond hole of the “if then else” block. Now, what are the two numbers that we want to compare? Yes, energy level and 0. So let’s put variable energy level into the first bubble of the “equal” block and 0 in the second bubble. You can also switch the order, putting 0 in the first bubble and “energy level” in the second bubble. Doesn’t matter.
* So, if energy level equals 0 what should we do? Yes, we would like to the game. Now, do you still remember how to end a game? In the “Turtle Crossing” lesson, how do we end the game when the crab touches the turtle? Yes, we use the “stop all” block to stop everything in the game. So let’s add that to the if branch or our block. Now, what should we do if energy level is not 0? Or what code should we add to the else branch of the block? Any idea? Yes! Nothing! Because there is nothing we need to do when the energy level has not reached 0 yet. We just continue with game! So we can just leave it as it is. Let’s test.
* Test. Now, as you can see, as soon as the energy level reaches 0, everything stops and you can no longer move the dragonfly. Perfect!
* Ok, so the code works perfectly. But  as you can see, the else branch of our “if then else” block is empty, there is no code in it. If there is no code in it, then why should we have it at all? We don’t need it. So in this case, if you take a look at the Control category, there is another block that you can use to make decisions, the “if then” block. It does not have an else brank and is perfect for our case here. So let’s replace the “if then else” block by the “if then” block. Nice, we get rid of the useless else branch
* Test. Everything works as before. |
| Insect | * Right now the dragonfly can only survive 15 seconds. To keep it alive for longer, which is also the goal of the game, we need to give it some food. And guess what the dragonfly loves to eat? Yes, insects! So let’s add one! Add an insect sprite by choosing the “insect” image from the Resources folder. 
* Now let’s get the insect moving. Let’s make it simple first, when the program starts, we  move the insect to a random position and make it point to a random direction. We have seen and learnt both blocks before, so you should already known how to use them by now. Because we want the insect to keep moving non-stop, so let’s add a forever loop next. In the loop, make the insect move 3 steps each time.
* Test. Ok, each time we start the game, the insect starts at a different position and points to a different direction.
* Problem: however, when it reaches the edge, it just keeps moving forward and disappears from the stage. 
* Solution: In lesson “[Find the bug](../Level1%2051869bb3a8274fd0910ceb115e2e8daf/5%20Find%20the%20Bug!%200233a4c8bcd445bdaed12ee36178701c.md)”, we have seen similar issues with the distracting Bat. And the solution there was… can anyone recall? Yes, use the “if on edge bounce” block. So let’s add that after the ‘move’ block.
* Test. Ok, problem solved.
* Problem: But right now, when the dragonfly touches the insect, nothing happens. The insect still flies happily and the energy of our dragonfly has not been replenished. This needs to be changed.
* Solution: First, how do we check if two sprites are touching each other? Yes, we have a “touching” block in the Sensing category. And in the dropdown menu of this block, you can select the sprite to check for collision. In this case, we want to check if the insect is touching the dragonfly, so let’s select dragonfly from the list. Next, we clearly need to make a decision here about whether the insect is touching the dragonfly. By now, we should have known how to make decisions, right? Yes, we use an “if then” block and put the “touching” condition in it. So if the insect is touching the dragonfly, what do you think the insect should do? Any idea? Ok, these are all very good answers. So let take a look at it together. First, we have seen that as time goes by, dragonfly decreases it energy level by one each second. When does the dragonfly increases it energy level? Of course when an insect is eaten. But how does the dragonfly knows when an insect is eaten? Well, it won’t know unless the insect tells it! How does an insect tells the dragonfly that it has been eaten? Yes, by sending a message! And how do you send a message? Of course, use broadcast! So, if the insect is touching the dragonfly, we first broadcast a message to let the dragonfly knows, let’s call it “Insect eaten”. Now back to the dragonfly, when it receives this “Insect eaten” message, we want to increase the energy level. How do you increase the value of a variable? Yes, use the “change by” block. Exactly how much to increase the energy level is totally up to you. I will just increase it by one. Now, just to make things a bit more interesting, we would also like to add some sound effect here. So let’s go to the dragonfly’s sound tab, in the sound library, let’s search for sound “Chomp”, Yeah, that’s like an eating sound. Cool. So add this to the dragonfly. Ok, back to the code and before we change its energy level, let’s use the “start sound” block and choose Chomp. 
* Test. Ok, now something funny is going on here…
* Problem: we can see that when the dragonfly touches the insect, the energy level bumps up quite a bit, not just one! See, here, when they collide, the energy level goes from 15 to 25! How is that possible? Can you spot the problem in our code? OK, let me explain: take a look at this (Reference: “[collision.pptx](https://github.com/jguo108/My-Programming-Courses/blob/main/Scratch/Level2/3%20Grow%20a%20Dragonfly/PPT/collision.pptx)”), the dragonfly and insect moves closer and closer to each other, ok, then they touch, now the insect broadcast a message and the dragonfly increases its energy level. Ok, so this is what we imagine should happen, right? But watch, after the initial touch, the dragonfly moves a little bit, and the insect also moves a little bit. Now, are they still touching now? Yes, they still touch each other. So the insect, checks and says “Oh, i’m still touching the dragonfly, so I will broadcast the Insect eaten message again!”. Now the dragonfly receives this message one more time, and as a result, increase its energy level one more time. So you can see that as both keep moving, they will be touching each other again and again, until after a couple of times, they finally move away and not touching anymore. During this process, each time they touch, the insect broadcasts a message, the dragonfly receives that message and increases its energy level. That is why the energy level increases by so much!
* Solution: Ok, knowing what is problem is, let’s think about how to solve it. Ok, the first time the dragonfly and the insect touch, we want to broadcast the message and increase the energy level by one. No doubt about that, right? But what we don’t want is that, all the other touches after this should not cause the energy level to increase. But how? Well, I don’t know if you have notice another problem: when the insect gets eaten, it is still on the stage happily flying. That can be right! It should disappear, right? Because it should already be in the stomach of the dragonfly by now! How do we make it disappear? Yes, use the “hide” block. So let’s hide it after the broadcast. As always, if you ever hide a sprite, always make sure to show it at the beginning of the program.
* Test. Ok, now when the insect touches the dragonfly, it gets eaten and disappears. What we have also noticed is that the energy level only increases once, the first problem is also solved magically or accidentally! Do you know why? Yes, because as soon as the two touch each other, we hide the insect, and because it is hidden, there is nothing for the dragonfly to touch with anymore! And because there is not more touches, no more messages are broadcasted and no more increase for the energy level! How cool is that. That’s what you call “kill two birds with one stone”, we use one change to solve two problems, nice!
* Problem: But maybe it is still too early to celebrate. We still have a problem here: when the insect gets eaten, it disappear, that nice, but what is not so nice is that it disappears forever, we never see it again! But our dragonfly’s energy level is dropping fast, so we need more food!
* Solution: Remember in the “[Ghost Buste](../Level1%2051869bb3a8274fd0910ceb115e2e8daf/4%20Ghost%20Buster%2031810f72b21c4323bd4fe2bb5d980a58.md)r” lesson, when we click ghost, it disappears and later reappears somewhere else on the stage. Do you think we can do something similar here? What if I give you 5 mins and see what you can come up with? Ok, times up, let’s do this together! So after the insect hides, we can move it to a new random position by using the “go to random position” block and make it point to a random direction using the “point towards random direction” block. Now, because we don’t want the insect to reappear right away, let’s make it wait for one second, and after that make it show again. 
* Test. Ok, now when the insect is eaten, its gone for while, and then reappear somewhere else on the stage. An the dragonfly just needs to eat them as soon as possible before its energy runs out! |
| Dragonfly bug | * Now, before we move on, let’s first fix a small bug: it is ok if the dragonfly just follows the mouse pointer from behind and not catching up with it. But if we stop moving the mouse pointer and the dragonfly eventually catches up and touches the mouse pointer, then it just goes crazy!
* This is because when the dragonfly touches the mouse pointer, it will still moves forward 5 steps, leaving the mouse pointer behind. But it realizes that immediately so it turns its head around and moves 5 steps back the pointer. Now the same happens again, it moves forward, turns its head around and moves back. That’s why you are seeing this crazy behavior. (Reference: “[dragonfly goes crazy.ppt](https://github.com/jguo108/My-Programming-Courses/blob/main/Scratch/Level2/3%20Grow%20a%20Dragonfly/PPT/dragonfly%20goes%20crazy.pptx)”)
* So how can we fix that? We will be making decision again: check if the dragonfly is touching the the mouse pointer, and if then we don’t want it point to the mouse pointer and move 5 steps; else the dragonfly behaves as normal, it points towards the mouse pointer and move 5 steps. Ok, that sounds like a job for the “if then else” block. Let’s give it a try. Now what do you think we should use for the if condition check here? We want to check if the dragonfly is touching the mouse pointer. Yes, we can use the “touching mouse pointer” diamond block. So let add that. Now, what should we do if they are touching? Yes, nothing! So let’s not put any blocks here. Else, meaning they are touching, what should we do? Yes, we make it point towards the mouse pointer and move 5 steps.
* Test. Now as soon as the dragonfly touches the insect, it stop right away without doing that crazy dance. Perfect!
* Now, let’s take a look back at the code, we use an “if then else” block, but the if branch contains no blocks at all. It is just empty so that we don’t do anything if the dragonfly and the mouse pointer are touching each other. We only go to the else branch if the two are NOT touching each other. Now I’m gonna repeat what I have just said: we only go to the else branch if the two are NOT touching each other. In other words, if the dragonfly is NOT touching the mouse pointer, then we make it point towards mouse pointer and move 5 steps, else we don’t do anything. So let’s move the “touching mouse pointer” condition out for time being, and let’s move all the blocks from the else branch to the if branch. Ok, for the condition of the “if then else” block, instead of checking “touching mouse pointer”, we now want to check for “NOT touching mouse pointer”, right? So we need a way to check for the opposite of a condition. But how? 
* Well, you might have already noticed that I use the word “NOT” a lot. If you take a look at the Operators category, there happens to be a “not” diamond block meaning it itself is also a condition that can be used to make a decision by other blocks. More importantly, It has a diamond shape hole where you can put in other diamond blocks or conditions. Our “touching mouse pointer” block is a condition, so if I put it into the hole of the NOT block, what do you think this means now? Yes, it reverses the “touching mouse pointer” condition. So what this means is that if “touching mouse pointer” is true, then NOT “touching mouse pointer” is false and if “touching mouse pointer” is false, then NOT “touching mouse pointer” becomes true. This is how Scratch lets us check for the opposite of a condition: simply put the condition into a “not” block. Right, now we can put the “not” condition into the “if then else” block so that the dragonfly will only move if 
it is not touching the mouse pointer, else, do nothing and leave that branch empty.
* Now, I know what you are thinking: why did we do all these work just to move the blocks from one branch to another branch and introduce a more complex condition? What does that buy us? Now, let’s say I have a “say” block after the “if then else” block, and also assume that that “not touching mouse pointer” condition is false, so we will go into the else branch, right? All good? Ok, so what do think the program will do when it is in the else branch? Nothing, right? Because there is no code in it. So what do you think the program will do next? Yes, it just continues with the “say” block, right? So far so good? Ok, now I have a question? If the else branch is empty? Then why have it at all? Any reason? No, there is no reason to have it! If so, why can’t we just remove it? If we remove it, what are we left with? Yes, just a “if then” block! Let’s try, so let’s add an “if then” block, move the condition and the movement code and the say block to it. Delete the “if then else” block. Ok, now let’s do the mental run of our program again, if the “not touching mouse pointer” condition is false, in this case, there is no else branch to go to, so we run the “say” block right away. Now a question for you: do you what we have here is a same as what we had before, that is with the “if then else” block? Any idea? Yes, they do exactly the same thing but with less code because we get rid of the empty else branch. So this just shows to you that, when you code, there are often multiple ways to achieve the same result. But we should always try our best to find the one with less code. Because in coding, less is better. OK, we can get rid of the “say” block because it’s only used for demonstration and we don’t actually need it. |
| Time reporting | * Ok, so when the game ends, if would be nice if we can know how long the player has kept the dragonfly alive. So that you can play with your friends to see who is the best!
* In lesson “[Find the bug](../Level1%2051869bb3a8274fd0910ceb115e2e8daf/5%20Find%20the%20Bug!%200233a4c8bcd445bdaed12ee36178701c.md)”, the bug used the “timer” block to report how long it took the player to complete all levels. Let's just remind ourselves what a timer is: it is just a ticking clock that always starts from time 0 when you click the green flag to start a project.
* Test. Let’s turn on the timer checkbox. Now you can see it on the stage and as soon as we start the game it also starts ticking. But when the dragonfly’s energy level drops to 0, the game stops because we use the “stop all” block. However, as you can see, the timer is still ticking. It only resets back to zero when we start the game again. 
* Problem: Now this is not very helpful to know how long the player has kept the dragonfly alive because the timer just continues ticking even after the game stops. We need a better approach.
* Solution: In lesson “[Find the bug](../Level1%2051869bb3a8274fd0910ceb115e2e8daf/5%20Find%20the%20Bug!%200233a4c8bcd445bdaed12ee36178701c.md)”, we let the bug report the value of the timer using a “ say” block when the game reaches the end. We can do the same here with our dragonfly, but since we now know what variables are and how to use them, let’s use a variable to display the time a player has spent at the end of the game.  So let’s create another variable, because this one is going to display the player time, I’m just gonna name it “Player time”. Uncheck this box to make it invisible on the stage. Now, it’s always a good practice to give any variable an initial value when the program starts. So what initial value do you think we should give “player time”? Yeah, 0 would do. Ok, so when the game ends, that is just before we stop all here, we want “player time” to show up on the stage with the time the player has been able to kept the dragonfly alive for. Now, this variable is now invisible, how do we make it visible again? Well, you might say we can just check this box here. Yes, that will show the variable. But the problem here is that, we want it to be hidden from the start of the game and only show when the game ends. How can we do that? Take a look at this block. What does it say? Yes, “show variable”? Can you guess what it does? Yes, it shows a variable. So let’s add that before the “stop all” and select our “player time” variable from the dropdown list
* Test. Ok, let’s uncheck the box, and start the game. See, as soon as the energy level drops to 0, which means the game ends, “player time” pops up on the stage. So cool.
* Problem: But now if we start the game again, “player time” is still on the stage. 
* Solution: Ok, we have seen similar problems again and again in the past in different context, whether it’s visibility, size, or position, there seems to be this pattern that when you change those things when the program runs, it’s always a good idea to reset those things when the program starts. So for example, if you hide a sprite, remember to show it again when the program starts; if you make the sprite bigger, remember to set it back to 100 when the program starts. So same with variables, we show “player time” when the game ends, as a result, we need to hide it again when the game starts. How do you hide a variable, yes, use  the “hide variable” block. Let’s add that at the beginning of the program and select “player time” from its dropdown list. 
* Test. Now when the game ends, “player time” is shown. When we start the game again, it hides again and only shows up when the game ends again. Cool.
* Problem: Ok, we have the variable to display how long the player has kept the dragonfly alive when the game ends, but right now, it’s always 0. Remember, this is because we set it to 0 at the beginning of the game. Now, when the game ends, what value do you think we should give “player time”? Yes, the “timer block”!
* Solution: So, just before we show the variable, let’s use the ”set variable to” block to set “player time” to “timer”.
* Test. There you go, when the game ends, “player time” pops up and shows how long the player has kept the dragonfly alive. Very nice! |
| Grow to full-size (not cover) | * In the fly, when it gets eaten, broadcast a message ‘food’
* When the dragon fly receives the ‘Food’ message, change size by 5
* Add the ‘Chomp’ sound when a fly is eaten
* If its size becomes 100 (i.e. full-size), we want to let the dragon fly says “I’m full” and stop the game.
* Attempt1: Say “I’m full” and stop all. However, we do not see the message because all scripts have been stopped
* Attempt2: Say “I’m full” for 2 seconds and stop all. However, between the say and the stop all, the insects still flies and we can still control the dragon fly
* Attempt3: broadcast an “end” message at the beginning and let  insects respond to that message by stopping other scripts in sprite. The dragon fly will handle the message by first stop other scripts in the sprite and finally say “full” for 2 seconds |
| More food (not cover) | * A a different insect
* Currently, the insect gets eaten if it touches any part of the dragon fly
* Paint the dragonfly’s mouth with a color (e.g. purple), and insect only gets eaten if it touches the dragonfly AND touches the purple color |

### Further Exploration

- How can you set the difficulty level just right for your game.
- Add animation and sound for the dragon fly. (see if you can find an appropriate sound in the library, if not, how about recording your own sound)
- Can you rewrite the energy reduction loop in the Dragonfly in at least two other different ways?
- Try to add the timer event code using the “another sprite” approach and “add to the dragonfly” approach? Which one do you like and why?
- How do you add an other insect that will increase the dragonfly’s energy level by a different increment?
- How can you add more randomness into the game?

### Exercise