# 3 Fruitopia (Revisited)

### Objectives

### Background

### Project

### What to learn

- list is an order list of things
- index to quickly locate things.

### Blocks

- add to list
- delete from list
- delete all of list
- ith item of list
- length of list

### Lesson Plan

| Step | Details |
| --- | --- |
| Introduction | * Ok, so we have learnt in the last two lessons a very important and powerful tool in Scratch: clones. This can be used when you want to have multiple sprites and they look or behave similarly or even identically. Instead of adding each sprite manual to the sprite pane list, we can ask a parent sprite to create as many as its clones we want instantly.
* So looking back at some of our previous projects, we can see that clones can be used there as well to make the project better. For example, in “[Turtle Crossing](../Level1%2051869bb3a8274fd0910ceb115e2e8daf/6%20Turtle%20Crossing%202cdafea6327c41f4872354ffed1c4938.md)”, all the crabs can be clones; in “[Escape Room](../Level2%20f841ea788a6f412db7884de2c891457c/13%20Escape%20Room%20343925c206954817b27e356e7d66d8fe.md)”, all the enemies, computers, laser gates can be clones as well.
* In order to see how clones can be used to make our old project shiny again, in this lesson, we are going to revisit the “[Fruitopia](../Level2%20f841ea788a6f412db7884de2c891457c/12%20Fruitopia%203b258d4f3331463683fa10b562901415.md)” project. In that project, we have a range of fresh fruit for the customer to choose from. Each fruit has the same behavior: when clicked, it goes to the trolley and increases the total price. Sounds like an ideal case to use clones. Yes, they do look different, but as the last lesson has shown, it is just simply a matter of giving each clone a different costume.
* Moreover, we are going to learn another important and powerful tool in Scratch called “List”. As the name suggests, it is just a list of things, numbers, texts what have you. This is often used along with clones to give you even more power to write complex and fun projects!
* So I can’t wait and let’s start today’s lesson! |
| Fruit Sprite | * OK, as we said at the beginning, all the different fruits have the same behavior. So the first change we want to make is to combine all of them into a single “Fruit” sprite using clones.
* Ok, every time you do this, first look at the code of each fruit and try to find out what is the same for all of them and what is unique to each fruit. So let’s look at the orange sprite, when the program starts, we first set its price. Clearly, this is different for each fruit type, right? So orange is 5, apple is 3, lemon is 2 and pear is 7. Next, the orange moves to its initial position. Do you think this position is the same for all fruits? Clearly No! Right? Ok, this is another place where fruits differ from each other. Let’s move on. When the sprite is clicked, if we are not checking out, we change total by the orange’s price, glide to the trolley, and stamp. So far this is the same for all fruits. Now, each fruit needs to go back to its initial position after being placed in the trolley. As we have discussed before, the initial position is different for each fruit.  So essentially, we have identified two things that are different for each fruit: its price and its initial position.
* OK, why is it important to identify such differences? Well, when you turn these sprites into clones, they will all run the same code, right? But just running the same code does not mean they have exactly the same behavior. For example, the in lesson ”[Synchronized Swim](1%20Synchronized%20Swimming%20bba3283731a548a78fa203c1fe036229.md)”, each cat clone runs the same “When I start as a clone” script. But they each faces and moves in a different direction. So how can that be possible? Well, it’s because we give each clone its own “direction” that is different from clone to clone. And that’s how we make clones behave differently. 
* Ok, enough talking, and let’s turn it into code! First, let’s duplicate the orange sprite and rename it to “Fruit”. We are going to create clones of this “Fruit” sprite for each type of fruit. But right now, it only has one orange costume. So let’s add the other three to it: apple, lemon and pear. (Also, we want to hide these four fruit sprites. This can be done by just clicking the little eye with a slash icon). Let’s delete all four fruit sprites. Notice that as we delete each one, it’s “price” variable is also gone. 
* Now, when the program starts, we want to create clones for the different fruits. First detach the existing code from the “when green clicked” block. Let’s first create an orange clone by adding a “create a clone of myself” block. After that, hide the parent sprite. When the clone starts, switch to the orange sprite and then show it on the stage. 
* Test. Click the orange and it moves the trolley and back. Now this might look the same as before, but here is an important difference: this orange here is not the parent sprite but a clone of it. If you now take a look at the clone counter, it says one, so there is now one clone. Also, because this clone behaves exactly the same as its parent sprite, we know that it also receives the click event and runs this “when this sprite clicked” script. After all, a clone is also a sprite, right? Actually, all events in the “Events” category can be used with a clone as well, not just an ordinary sprite. 
* Back to the code. Now, let’s create another clone for the apple. Add one more “create clone of myself” block. 
* Test. Now we do have two clones as the clone counter shows. 
* Problem: But we are still just seeing only orange and no apple at all! Well, this makes sense because if you look at the clone script, the first thing it does is to switch to the “Orange” costume. Since both clones are running the same script, they all switch to the “Orange” costume. How do we give them different costumes then? One for orange and one for apple?
* Solution: In last lesson, we gave each clone a random costume using the costume number. Here, we cannot use random numbers, because we specifically want the first clone to be an orange and the second one to be an apple. But what if we give each clone its own number, say we give orange clone number one and the apple clone number two. Then each clone can just switch to its own number and that should give it the correct costume. Any how do you give each clone its own number? Yes, we use variables! So let’s create a new variable, and I’m going to name it “id”. Each clone is going to have its own id number, so orange will have one, apple two and so on. So we are going to make it local by selecting “For this sprite only”. Now, before we create each fruit clone, we are going to set “id” to the correct number. For example, the first clone is an orange, so let’s set “id” to one before creating it. Now when the clone is actually create, the parent sprite makes a copy of “id”, which also has the value of one, and pass that to the clone. So in the clone script, we can just use this copy of the “id” variable in the “switch costume to” block to make it put on the first costume, which is an orange. And similarly, before creating the second clone, we set “id” to two this time, now when creating the second clone, the parent sprite makes a copy of the “id” variable, which now contains the value two and pass it to the second clone. In the clone script, the second clone is going to switch to costume number two, because the copy of the “id” variable now contains value two.
* Test. OK, now we can see an apple, but where is the orange? Well, if you drag the apple away, you can see that it is just beneath the orange. Cool, we now have two fruit clones, one for orange and one for apple. 
* Problem: But the apple clone shows up at the wrong place, it should be in the apple section. Why is that? Well, when a clone starts to run, did we move it anywhere? No! We did not use any motion block to move a clone to its own position. Now, the question becomes: if we do want to move a clone, where should it go? What values should we put into the x and y here? Well, clear we cannot just use 7 and 39 here, because this is the position of the orange, and if we put that in the clone script, then all clones are going to the orange place again. And we are back to where we were! So each clone needs to have its own x and y values, right? For example, if we open the project from the original lesson “Fruitopia” and take a look at the apple sprite, its position is x 66 and y 40. Now, once again, we need some values, x position and y position, that are different for each clone. 
* Solution: And the solution is? Yes! variables again! Because we need a different x position and a different y position for each clone, so we create two new variables: “x position”, make it “For this sprite only” and “y position”, make it “For this sprite only” too. Now, just like the “id” variable, we set “x position” and “y position” for each clone just before it is created. So for the first orange clone, it’s x position is 7 and y position is 3; for the second apple clone, it’s x position is 66 and y position is 40. Ok, then in the clone script, we can just go to “x position” and “y position”.
* Test. Run, and there you go, this time, the orange is at its section and the apple is at its section, they each goes to where they should be, nice! And if we click the orange, it goes to the trolley and back, no problem!
* Problem: And if we click the apple, it goes to the trolley and… oh no… what is going on here? Why did it move back to where the orange is? What happened? 
* Solution: To answer that, we first need to ask ourselves where in the code do we move the fruit back to its initial position after being placed in the trolley? Yes, we do it here with this “go to” block. Now, what position is that? It’s x 7 and y 39, that looks like the position of the orange! No wonder why the apple goes back to the orange again! Ok, so for each clone, how does it know what position to go back to after being placed in the trolley? Yes, we have just created the “x position” and “y position” variables for each clone! So all we need is to use them here instead!
* Test. Now, if we click the apple clone, it goes to the trolley and boom, back to where it was before. Perfect!
* Problem: But I don’t know if notice that, when we click and add the orange, “Total” was increased by 5, that’s because orange’s price is 5, so no problem with that. But watch when I click and add apple, “Total” is increased once more by 5, but remember, the price for apple is 3, not 5. So why did “Total” increase by 5? Well, this is the same as asking “why did apple go to the orange’s place” before, because we have not told the orange clone or the apple clone what their price should be! So here is one more case where we need each clone to have a different value, yes, a different price.
* Solution: So I think you can already guess that the solution is: Yes, add use a variable. We need a price variable for each clone. In this case, though, we already have a “price” variable, because this “Fruit” sprite was duplicated from the original “orange” sprite, and that “orange” sprite has a “price” variable. So no need to create one. But is it local or global? Because for each clone to have its own price, this variable must be local. Ok, that’s easy to check, just go to the variable, right click and select “Rename or edit variable”, in the popup window, we can see that it’s “For this sprite only”, so it’s local and we are good. Now just like all the other variables, we set “price” before creating each fruit clone. So the first clone is an orange, we set “price” to 5 before creating it; the second clone is an apple, we set “price” to 3 before creating it.
* Test. Now, whenever we click an orange, “total” is increased by 5 and whenever we click an apple, “total” is increase by 3 this time, and not 5. Perfect!
* Problem: Ok, so the code seems to work. But there is a small problem: remember before using clones, each fruit sprite has its “price” variable shown just above it, right? If don’t remember, just open the project from lesson “[Fruitopia](../Level2%20f841ea788a6f412db7884de2c891457c/12%20Fruitopia%203b258d4f3331463683fa10b562901415.md)” and you will all the prices, 5, 3, 2 and 7. But after we start to use clones, those prices are all gone. If you go to the “Fruit” sprite and make its “price” variable visible, you only see one showing up on the stage and its value is 3. Looks like it’s the price of the apple clone. But why apple’s price and why there is just one and not two price variables, since we have two clones here? We will answer the second question first: why there is just one variable? Well, it’s simple, because Scratch will only show the parent sprite’s variable and never the clone’s variable. Remember, when you have a local variable such as the “price” here and then create a clone, the parent sprite is going to make a copy of its “price” variable and pass that to the clone. So now you have two “price” variables, one for the parent sprite and one for the new clone. If you create a second clone, the parent sprite is going to make another copy of its “price” variable and pass that copy to the second clone. Now you have three “price” variables, one for the parent sprite, and two for the two clones. Ok, so if you make the “price” visible, Scratch will only show the parent sprite’s “price” variable, never the clone’s “price” variable. So this is why you are only seeing one “price” variable on the stage. So, this answers the second question. Now, back to the first question: why is the value of “price” variable three? Since we now know that what shows up on the stage is the parent sprite’s “price” variable, the question actually becomes “why is the value of the parent sprite’s ‘price’ variable three?” To answer that, let’s take a look at the script after green flag is clicked. Before we create the first clone, we set “price” to 5. Now let me ask you, does this “price” variable belongs to the parent sprite or the clone that is about to create? Yes, it’s the parent sprite’s “price” variable, remember, the parent sprite is going to create a copy of this variable and pass that copy to the clone for it to use. So now the parent sprite’s “price” variable becomes 5. Ok, next, before creating the second clone, “price” variable is set to 3, and same question to you: does this “price” variable belong to the parent sprite or the second new clone? Yes, it is still the parent sprite’s “price” variable. Now the value of this “price” variable becomes three, and then we create the second clone and hide and this script ends. So, in the end, what value do you think the parent sprite’s “price” variable has? Yes, three, because it was last set to three before creating the second clone. So, that’s why the price variable on the stage now shows three. 
* Solution: Since this “price” variable on the stage belongs only to the parent sprite, while all of the fruits here are clones of the parent sprite, we need a new way to show the price of each individual fruit. One way I can think of is to change the backdrop directly, just like what we have done to the store name “Jing’s Fruitopia”. So select the stage, choose the “Backdrops” tab. Ok we are going to add the price of each fruit as text to each board here. Select the text tool with this big letter “T” in the toolbox, click anywhere on the backdrop and type in 5. Now we can change its color to a greyish one. If you want, you can also select a different font here. For example, assuming this is an electronic board with a digital screen, I will select the “Pixel” font. OK, choose the selection tool, drag the blue circle in the corner to make the text bigger and then just move it above the oranges. Ok, then make sure this text is selected, then press Ctrl+C to copy and Ctrl+V to paste, now we have a new text of the apples, its price is 3, so choose the text tool again, click the second text, and type in “3”. Now use the selection tool again to move it to the right place. Cool, I will leave the other two as an exercise. Of course, the downside of this solution is that, every time we change the fruit price, we need to remember to update the backdrop with that latest price too! |
| Updated Checkout (Introducing List and List blocks) | * Right now, the price of each fruit is added to “total” when we add it to the trolley. However, think about what real shopping is like: You walk into a shop, grab a trolley, find each product you need and put that into the trolley. You just keeping do that until everything you need is in the trolley. Ok, would you add up the total while you are just wandering in the store? No! Well at least I wouldn’t do that! When you finally have everything and walk to the checkout counter, the staff then picks up each product from the trolley, scan it, tells you what the price of that product is and what is the current total. For example, let’s say I have one orange and two apples in my trolley. At the counter, the staff first picks up an orange, scans it and says “Orange, price 5, total 5”. Then, he/she picks an apple, scans it and says “Apple, price 3, total 8”. Finally, he/she picks up the second apple, scans it and says “Apple, price 3, total 11”. 
* Ok, it seems that we need somewhere to store all the fruits we have selected before checking out. So far in our study of Scratch, we have learnt that to store something, you need a variable, right? But as we have seen again and again, a variable can only store one thing at a time. Just take a look at the variables in this project: the “price” variable, store a single price of a fruit; the “x position”, stores a single x position of a fruit. So it’s always just one thing. Now think about the case here, we need to store all the selected fruits, it could be just one, but it could also be one hundred. So, clearly we need something other than a variable to store them. 
* Fortunately, there is a special kind of variables in Scratch called “List”. If you go to the Variables category, previously, we always use this “Make a Variable” option to create an ordinary variable. But you go a little bit further down, there is another option called “Make a List”. If you click that, a window that looks very much like variable shows up. Here you can give the list a name just like you can give a variable a name. Let’s call this “trolley”, because we want to use this list as a trolley to store all the fruits we picked. Next, you can also make the list local to this sprite or global for all sprites. We will leave it as global for the time being. Now, click ”OK” and you will see a new list variable named “trolley” showing up under the “Make a List” option. Just like a variable, you can make a list visible on the stage or not. So let’s show it by checking the box here. Now you see a big rectangle box on the stage. At the top, it shows the name of the list “trolley”.  The middle section here will be items that are stored in the list. Because we have just created the list, there is nothing inside, it shows “empty”. The bottom shows how many items there are currently in the list. 
* OK, well, a list, as the name suggests, is just a list of items. You can add any numbers of items to it, one, two, one hundred, one thousand, as many as you need. What is important is that, all items in a list are in some order: the first item you add comes first, and the second item you add comes next, and so on and so forth. Think of it as a queue of people waiting to get their coffee, they are ordered by the time each one arrives at the queue. The one who comes first gets the coffee first and the one who comes last gets the coffee last. 
* In Scratch, it is not people, but numbers and text that we can add to a list. But how do you do that? If you take a look at the Variable category again, after we have created the “trolley” list, a number of new blocks in orange color show up. These are all the things you can do to a list. For example, to add something to a list, we can use the “add thing to list” block: whatever in the bubble is the thing you want to add, I can type in numbers or words. The dropdown here allows you to choose the list you want to add to. Because we just have one list so far, so “trolley” is the only one we can select. But in more complex projects, you can have many lists. It also allows you to rename or delete a list.
* OK, let’s try to add something to our “trolley” list: I will type in orange, and click the block. Now see that happen to the list on the stage: previously this large middle section says “empty”, because there is nothing in the list. Since we have just added “orange” to it, it now contains an item “orange”. Also notice that the bottom says “length 1”, meaning the list is one item long, or in other words it has one item. Let’s add an apple next, type in “apple” in the bubble and click the block, voila, we have a second “apple” item in the list! The length at the bottom changes to 2, meaning there are two items in the list now. Also, if you take a look at each item, there is a small number to the left of each one: it’s one for orange and two for apple. These numbers show the order of the items in a list: because “orange” comes first and “apple” comes next. 
* Ok, next let’s a look at a few list blocks that are frequently used. We can clearly see how many items there are in a list on the stage, right? But very often, our program needs to know the length of a list too. But obviously it can not just look at the stage and says “ah, it’s 2”. We need a block to do that. Fortunately, there is such a block: it is this “length of list” block. Now, again, it has a dropdown where you can select the list to get length of, here it’s “trolley”. If we click this block, see, if gives you number “2”, which is the current length of the list. 
* Next, when we talked about the “trolly” list, I said these little numbers to the left of each item shows the order of them in the list. But they are more than just showing the order, in fact, a more formal and technical term for these numbers is “index”. An “index”, what is  that? Well, when you read a book, there is sometimes an index page at the end. What is that for? Well the index is for you to quickly find where things are in a book. For example, a Scratch book might have an index page with all the important blocks, for each block it tells you in which page or pages this blocks appears. So if you want to find all information about this particular block, you can just go to the index page and quickly find all the pages for this block. And this what an index is for: it allows you to quickly find things. So the reason these numbers are called “index” is because they allow you to quickly find an item in the list. For example, you can just say ”hey, give me the second item in the trolley list” and this should give you “apple”. With only two items in our list now, this might not seem to be a big deal, but imagine trying to find the 845th item in a list with one thousand items! Because it is very important for use to quickly find and get an item in a list, Scratch provides this “item of list” block. You provide an index in the bubble, which is just a number, and it gives you the item at that index. So if I type in 1 as the index and click the block, it gives “orange”, which makes sense, because the first item is indeed “orange”. And if I type in 2, it gives back “apple” because this is the second item in the list. Cool! Now, here is the funny thing, what if I give it 3? Well, there clearly isn’t a third item in the list! So what do you it will give back? Have a guess? Yes, because there is nothing there, so it returns nothing. Let’s click and as you can see, it just returns empty! So this is an important thing to keep in mind, always give a list an index that is within its “range”. What does a “range” mean? Well, we have seen a range before when using the “pick random” block, here you give it two numbers, for example the 1 and 10 here, this means you want to pick a random number in the range from 1 to 10. So no number picked will not be smaller than 1 or bigger than 10, it’s always within this range. Now, index is similar, for the trolley list, the smallest index is 1 and biggest index is 2, so its index range is from 1 to 2. But for a list which has 100 items, its index range is from 1 to 100. Every time you use an index to select an item from a list, make sure that the index is within its range, otherwise you will just get nothing back.
* OK, still remember the queue in front of a coffee shop? As people gets their coffee, they leave the queue, right? So, just as we can add items to a list, we want to be able to delete items from list as well. Scratch provides us with two blocks to delete things from a list: the “delete index of list” block and the “delete all of list” block. The “delete all of list” is simple, all it does is just remove everything from a list and make it empty again. If we click it, Boom, all the fruits in our list are gone and it becomes empty again. Let’s add the orange and apple back first. The second block deletes an item at a specific index and you provide the index in the bubble. So if I type in “2” and click the block, now the second item “apple” is gone, removed from the list. Now, if I type in “1”, then the first and the only item in the list is removed from it. Ok, that should fairly straightforward. |
| Updated Checkout (Adding fruit to the “trolley” list) | * Ok, now let’s see how this new powerful tool can make the shopping and checkout process even better!
* First, as discussed before, we are not going to change “total” as we are adding the fruits to the trolley. Instead, this will be done when we are checking out. So let’s delete the ”change total by price” block here. 
* Next, let’s add this “delete all of trolley” block when green flag is clicked so that we start with an empty trolley every time. Now, when a fruit is selected, it is not only going to just move to the trolley sprite, but also get added to the “trolley” list. This can be done with the “add item to list” block. But here the item to be added is “apple”. What do you think if we just leave it like this? Let’s find out
* Test. We click the apple and “apple” gets added to the list. 
* Problem: Next, we click the orange and oops, it is still “apple” that gets added to the list. Well, this should not come as a surprise to you, because whenever a clone is clicked, we always add an “apple” to the list here. What we really want is to add whichever fruit that is clicked to the list instead. If the orange is clicked, we add “orange” and if the apple is clicked, we add “apple”. 
* Solution: This is another case where different clones need something that is unique to itself, and this something is the name of the fruit. And the solution is? Yes, one more variable! Let’s create another variable called “fruit name”, and because each clone has its own name, we make this variable local by choosing “For this sprite only”. Ok, just like all the other variables for each clone, we set “fruit name” to “Orange” before creating the first orange clone and set it to “apple” before creating the second apple [clone.](http://clone.Now) Now when the clone is clicked, we add ”fruit name” to the “trolley” list.
* Test. Let’s run the program again. Now, when the orange clone is clicked, “orange” gets added to the trolley list and then apple clone is clicked, “apple” gets added to the list. Perfect! |
| Updated Checkout (Check length of “trolley” to decide checkout or not) | * Ok, say we are happy with what we have in the trolley, it’s time to checkout. Let’s go the checkout staff sprite. First let’s see after all these changes to the fruit, what would happen if we checkout now.
* Test. We have an orange and an apple in the trolley and let’s click the staff, she asks “Would you like to pay?” and we answer “Yes”.
* Problem: Ha, she then says “Please choose some lovely fruit from out collection!” What? We have already have an orange and an apple in the trolly? What is going on? Well, to understand that, we need to look at the code and see under what condition would she say that. Right now, if “total” is greater than 0, she thinks that there is something in the trolley and goes ahead with the checkout; otherwise, she thinks the trolley is empty and says “Please choose some lovely fruit from out collection!”. However, this only works because previously we increase “total” by the fruit price when we select it, so if “total” is greater than 0, then there must be something in the trolley. But is this still the case after all these changes we have made to the fruit? No! Remember, we deleted the block that increases “total” by the fruit price? And if you take a look at the “total” variable on the stage, you can see that even though we have an orange and an apple in the trolley, “total” is still zero. And the reason we do not increase “total” is just because it does not make sense to work out the total when you are just selecting the fruit. This should be done when you checkout. No wonder why the staff thinks that we have nothing in the trolley! 
* Solution: Ok, so “total” is zero when we just start to checkout, and it doesn’t matter whether we have any fruit in our trolley or not. So we need something else to tell the staff if there is anything in the trolley or not. Which one do you think can be a good candidate? Well, if we want to check if there is anything in the trolley, then maybe we should just look at the trolley and see if there is anything in it? Right? But here, it’s not the trolley sprite, but the “trolley” list! Remember, we have added an orange and an apple to this list! So it is clearly no empty. So instead of checking if “total” is greater than 0, we need to check if the “trolley” list has any items. But how? How do we know if there is anything in the trolley list? Well, still remember the length of a list? What is the length of our trolley list now? It’s two, because we have two fruits in it? And what do you think the length should be if a list is empty? Yes, zero! Because there are no items, so the length is of course 0! So if the length of a list is greater than 0, than we are pretty sure that there are things in the list, right? Make sense? And how do we know the length of a list? Simple, use the “length of list” block! So we have a solution now, instead of checking if “total” is greater than 0 to see if there are anything in the trolley, we check if the length of “trolley” list is greater than zero! By the way, remember when we created this “trolley” list, we set it to global? And here is the reason, because the checkout staff also needs to use it. 
* Test. Now let’s test this again. Clear the trolley list, select orange, select apple and click the checkout staff. She asks “would you like to pay?” and we reply “yes”. Now see? she says “the total is 0” and “thank you for shopping at Jing’s Fruitopia!” OK, the total is still wrong and we have to look at that next. But at least she now thinks that our trolley is not empty. That’s a solid step forward!  |
| Updated Checkout (Reporting each fruit) | * OK, as we have seen, the “total” is completely wrong here, it is always zero no matter how many fruits we have in the trolley. With this new “trolley” list, what we want is that, when checking out, the staff takes the fruits out from the “trolley” list one by one for scanning, and for each one, she tells you what fruit this is, how much is it and what is the total now. For example, with the two fruits we have in the trolley, she first picks out the orange and say “orange, 5, total 5”, then she picks the apple out and say “apple, 3, total 8”. This is what we eventually want to achieve.
* Ok, this is a slightly complex problem and let’s solve it one step at a time. For the first step, we only want her to pick the fruit out from the trolley and tell us that this is, let’s not worry about the fruit’s price and the current total right now. 
* OK, let’s see that is going to happen to the “trolley” list when she does that. She tells us what the first item is, in this case, it’s an orange, and then takes it out, which is the same as removing it from the trolley. Because the orange is now removed from the list, apple becomes the first item. So she repeats these two steps again, tells us what the first item is, which is an apple now, and then removes it from the trolley. Now she repeats these two steps again and again for each fruit in the trolley until there is no more in the list! Hmmm…”repeat until there is no more items in the list” I think that gives us some hint about what to do next, don’t you think? It happens that we have a “repeat until” loop in Scratch! So let’s drag one out. Now what is the condition going to be? She repeats until the trolley is empty, right? So this is the condition! But how do we check if the “trolley” list is empty? Simple, if its length is zero, right? Now, we can just check if the length of “trolley” equals to zero. Ok, if not, then what does she do? Yes, she does two things: first, tells us what the first fruit is in the trolley. Let’s add a “say” block and how do we get the first item of a list. Yes, we use the block “item 1 of trolley”. The second thing she does is to take and remove the first item in the list. And we also have a block for that, it’s the “delete first of trolley”. Now, instead of saying the total, let’s replace it with this “repeat until” loop. Also, let’s not play the “Machine” sound any more. Instead, each time she takes out a fruit and scans it, we play a scanning sound. Of course, there is not such “scanning sound” in the Scratch sound library. But I find the “coin” sound close enough, so let’s add that to the sprite. Then we play the “coin” sound instead and move this block inside the repeat loop. So this sound will be play for each fruit.
* Test. Ok, let’s clear the trolley list again and test. Click orange, click apple, click the checkout staff, answer “yes”. Now, here is the amazing thing: the staff first says “orange” and then removes it from the trolley list. We also hear a scanning sound at the same time. Then she says “apple” and then removes it from the trolley with another scanning sound. After this, the trolley list becomes empty, which makes sense, because all the fruits have been taken out and scanned. Very nice!  |
| Updated Checkout (Reporting price) | * Ok, so far so good. But there is one important thing that is missing: when the staff scan each fruit, she is neither telling us the price or the total. Let’s take a look, now, the “trolly” list only has all the fruits, but no price information about each fruit. So when the staff takes each one out from the trolley, of course, she has no way to know what the price is.
* OK, think about what it is like when you go shopping in the real world: everything has a price tag, and when checking out, the staff scans each product to add its price to the total, right? Now, can we give a price tag to each fruit we add to the trolley? Right, now, we are just simply adding the fruit with no price information at all. What if, when we add the fruit, we also add its price?
* Let’s get back to the Fruit sprite. Now, what if when we add a fruit to the “trolley” list, we also add its price as well? Because the price of each fruit clone is stored in its “price” variable, we can add “price” to the “trolley” list after adding the fruit itself. 
* Test. Ok, let’s test this out. Clear the “trolley” list. Now, add an orange first. Wow, did you see what happened? The trolley now has two items, the fruit “orange” and its price 5. Now if we click and add the apple again, Wow, two more items are added, the fruit “apple” and its price 3. Now the length of the list is 4 instead of 2 even though we just added two fruits. This is because their prices were added too.
* Ok, that’s good! We now have the price tag of each fruit as well! Let’s get back to the checkout staff. Right now, in the repeat until loop, she takes out each fruit one after the other. But this time, things are different, after taking out a fruit, the next item in the list is its price, and not the next fruit. For example, after taking out “orange”, the next item is not “apple” but orange’s price 5. 
* So in each loop iteration, the staff needs to take out two items, the fruit and its price, and then also delete these two items when finished. Ok, let’s first make sure we delete both. This is simple, we just add another “delete first of trolley” block. So the first delete removes “orange” and the second delete removes its price.
* Test. Ok, let’s give that a test. Now we have the fruits and their prices in the trolley. Start the checkout, answer “yes”, And see what happened, she says “orange”, then look at the “trolley” list, both “orange” and its price 5 are gone; then she says “apple”, and both “apple” and its price 3 are gone. At the end, the “trolley” becomes empty again. Nice!
* Next, we want the staff to tell us not just the fruit, but its price too. When she say that, the first item of “trolley” is the fruit, and the second item is its price. So it is as simple as joining the first and the second items of the “trolley” list. But of course, since it is a sentence, the joining is slightly more complicated than that. So we want some thing like fruit name, comma, “price: ” and the actual price. From lesson “[Math Quiz](../Level2%20f841ea788a6f412db7884de2c891457c/11%20Math%20Quiz%20e4c581248b9f46768c97a45f25b3bc4c.md)” we have already leant how to join and create such complex sentence, always work from right to left. So the two part on the right are the actual price and the text “, price: ”, so let’s joint these two first. And remember, the actual price is now the second item of the “trolley” list. So we join text “, price: ” with “item 2 of trolley”. Ok, now, the two parts on the right becomes the name of the fruit, which is just the first item of the “trolley” list and this new join block. Let’s join them up. Ok this should now be our final sentence, and let’s put this into the say block.
* Test. Now test it again. Add an orange, add an apple, checkout, and answer “yes”. Now watch, she says “orange, price: 5”, and then “apple, price: 3”. Super! |
| Updated Checkout (Reporting total) | * Ok, we are almost there! There is just one final thing I would like to add before calling it a day! Right now, our “total” is still zero and we do not know the total price to pay! So let’s change that!
* Now, we have the price of each fruit as the checkout staff scans them. All we need to do is just add those prices to the “total” variable one by one. At the end, she can then tell us the total price by saying something like “The total is 8”. 
* Ok, the code shouldn’t be hard. We already have a “total” variable so no need to create one. In the repeat until loop, as each fruit is taken out from the trolley and scanned, we just need to change “total” by the price of the current fruit. Where is this price? Well, we have already seen it: it is the second item of the “trolley” list. So after the “say” block, let’s change “total” by the second item of the “trolley” list. 
* Finally, when all fruits have been scanned, we add a “say” block to report the total price. This sentence can be created by simply joining the text “The total is ” with the “total” variable. 
* Test. Ok let’s give it a final test. Add an orange, add an apple, checkout, answer “yes”. So she says “orange, price: 5”, “apple, price 3” and then “The total is 8” and finally “Thank you for shopping at Jing’s Fruitopia!” Perfect!
* Finally, we don’t need the “total” variable and the “trolley” list shown on the stage. So we can just hide both of them. |
| Custom blocks |  |

### Further Exploration

- Finish the code for the other two types of fruits: lemon and pear.
- Currently, we put the fruit and its price in the same list “trolley”. Can you try to put all the prices into a different list, for example, a “price tag” list. And what code do you need to change to make this work?
- Explore with other list blocks to see if you can understand them.

### Exercise