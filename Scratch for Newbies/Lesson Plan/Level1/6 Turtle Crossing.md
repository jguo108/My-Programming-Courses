# 6 Turtle Crossing

### Reference

Fruit Catcher from <25 Scratch3 games for kids>

### What to learn

- Different ways to interact with a game: mouse/keyboard
- In coding, it’s very common to do the “experiment and check” cycle
- Diamond blocks in Scratch is like a Yes/No question. It can be placed in the blocks that have a diamond shape hole. These diamond shaped blocks are formally called a Condition, that can be either true or false.
- Color picker
- Touching sprite is always better than touching color
- Sprite can not click the stop button to stop everything, but they can use the stop block to stop everything

### Blocks

- when key pressed
- repeat until
- touching color
- touching sprite
- stop all

### Lesson Plan

| Step | Details |
| --- | --- |
| Introduction | * Ok, welcome back everyone! Good to see you all again! Ready for some new challenge? Yeah? Good! Let’s start today’s lesson!

* Ok, is anyone here a big fan of wild life documentaries? Cool, still any animal stories that would stay with you forever? Ok, good, very interesting, thanks for sharing. For me, one of the most amazing story is about the dangerous journey baby turtles take to get to their ocean home. Baby turtles hatch from eggs buried in the warm sand on the beach. Once they dig their way up to the surface, the dangerous and adventurous journey to the ocean begins! Why? Well, because the beach is a scary place for little turtles. Birds flying overhead might see a tiny turtle crawling along and swoop down to grab it! If that’s not enough, there are also crabs scuttling around, and they love to snap up baby turtles for a snack!  

* So today, we are going to turn into little turtles and try to get our way to the ocean. But this is not going to be an easy ride! There will be hungry and deadly crabs on our way, ready to take us for a snack! If we are unfortunate to be caught by the crabs, it’s game over. On the other hand, if we are able to finally reach the ocean, hooray, it’s a win for us and a win for the little turtle! This is a game of patience and quick response! Let’s see who can get to the ocean!

* Ok, enough talking, let’s get coding! |
| Backdrop | * Ok, let’s create another new project in our account. Name it “Lesson 6 - Turtle Crossing”, delete the default sprite and change the stage size to 4 by 3. Right like every other project, let’s set the stage first. For this game, we need a beach backdrop with a bit of ocean. So our baby turtles can hatch on the beach and run to the ocean for life. Now, I have taken a look at the Scratch backdrop library and I can tell you there is no backdrop that meets our needs. So we need our own backdrop. 

* We’ve learnt how to use our own images for backdrop in the very first lesson: Space Talk. But after that lesson we either draw our own backdrops or use existing images from the library from lesson 2 to lesson 5. Now, it’s time to use our own backdrop again! Right, let’s go through the entire process again! First, click the Backdrops tab. Now, instead of selecting “Choose a backdrop”, which is going to take us to the backdrop library, we select “Upload HD Image”. Now the “HD” here stands for “High Definition”. Meaning the image is going to be crystal clear. There is another option called “Upload Backdrop”. This can also upload a local image, but it is not going to be High Definition. Ok, once you click “Upload HD Image”, a window pops up. This is called the “File Explorer”, where you can explore all files locally on you computer and select the whichever one you need. So first, we need to find the image for the backdrop. Hopefully, you still know where the folder “Scratch for Newbies” for this entire course is! Mine is just sitting at the Desktop, so click Desktop and there it is. Now  double click it to open, and here are the three folders for the three levels. We are still at level1, so double click “Level1” folder, and here are all the 6 lesson folders for this level. Since this is the sixth lesson “Turtle Crossing”, let’s double click the last folder to open it. Now, like every other lesson, all the images files for sprites or backdrops are in the “Resources” folder, let’s open that up. Here, there are two folders, one for backdrop images and one for sprite images. Let’s open the “Backdrop” folder, and finally we have located the backdrop image “backdrop.png”. Now, all you need to do is just to double click this image file. Voila! It has been uploaded and added to our backdrop list! After that, since no longer need the default empty backdrop, let’s get rid of it. Ok, now if we click the Code tab to go back to the main editor, our stage has a new beach backdrop, with a bit of ocean at the top.

* So, the plan is to have the turtle start somewhere at the bottom, move upwards to the ocean, and try not to be caught by the crabs along the way! Cool! |
| Turtle setup | * Ok, the stage is set, time to add the sprites! What sprites do think we need  for this game? Yes, we need the turtle and the crabs. Let’s take care the turtle first! Again, there isn’t a good turtle image in the sprite library, so I have prepared one of our own for this game. To add it, let’s select “Upload a Sprite” instead of “Choose a Sprite”. Now, the file explorer pops up again. This time it’s already in the Backdrop folder because we came here for the backdrop image earlier. So selecting the turtle image is much easier this time, we just need to go back to the “Resources” folder by clicking “Resources” here, then just double click and open the “Sprites” folder. Here, you would see two images, one for the turtle and one for the crab. We will use the crab image later in the lesson. Right now, just double click the turtle image to add it to our project! 

* Ok, wow, what a giant turtle! I think we were talking about baby turtles, right? Yes, so how can we make it smaller? Yes, two ways, change the size property in the property panel or change it in the code using the “set size to block”. It doesn’t matter which one you choose, I would just do it with code block. So first add a “When flag clicked” block, then connect the “set size” block to it. Now for the size, I don’t know, let’s try 30% first. 

* Test. Ok, click the Go button to kick things off. Right, the turtle is much smaller now. But I think it’s still a bit too big. Let’s change the size to 10%. Click the Go button again, and Yes, I think it looks about right now. So let’s leave it at 10%. Nice! Also, let’s drag it to the bottom of the stage. 

* Now, the size is right, but the turtle is not facing the right direction. Once hatches, it should face towards the ocean, right? After all, that’s where it wants to get to. So, let’s make it face the ocean! That means the turtle needs to face straight up. How do we change the direction a sprite points to? Yes, the “point in direction” block in the Motion category. Let’s connect that to the “set size” block. Ok, what degree should we point to? AHa, time to bring up the direction clock! So, it’s pointing to 90 degrees, which is to the right. Now, to point straight up, we need to grab and turn the arrow counter clockwise, until it’s at 12 o’clock. Now take a look at the turtle, is it pointing up? Yes! And what degree is it now? Yes, 0 degree. So let’s put in 0 in the slot of the “point in direction” block. Now, if we change the turtle’s direction back to 90, and click the Go button, it point back up again! Nice!

* Ok, the turtle has the right size, points to the right direction, what else do we need to set up for the turtle before the game starts? Yes, we want it to start at the same location each time. We want it to start somewhere at the bottom and in the middle. So let’s first add a “go to” block at the end of the script, now, it’s just matter of choosing the right x and y coordinates. Question: what should the x coordinate be if a sprite is right at the vertical center line? Yes, it’s 0! Every position on this vertical canter line has 0 x coordinate, so let’s put 0 for x. Now for y, we don’t need to be that precise, as long as it’s somewhere at the bottom, it’s fine. Right now, the turtle’s y coordinate is -142. That’s ok. But I just want to move it a bit further down. So let’s change it to -150. 

* Test. Ok, start the game. And yes, everything looks good. Size, direction, position, all set and done! Cool! |
| Turtle moves straight to ocean | * Ok, it’s time to move our turtle to the ocean! By now, moving a sprite shouldn’t be new or difficult to you. We have been moving the boat in Lesson2, moving different animals to the school bus in lesson 3 and moving the distracting bats in lesson 5. So which block can we use do move the turtle? Yes, there are a couple, the move block, go to block, glide block or even the change x and change y block. Here, let’s start with the one that we use most often: the move block. Right, is it ok if I just connect it to the end script? What do you think? Let’s find out!

* Test. Ok, once the game starts, the turtle moves 10 step up, exactly what the script asks it to do. But is this good enough? Of course not! Our goal is to reach the ocean! Now, remind yourself about how the bear moves to catches the school bus? Yes, it moves a small number of steps each time, then repeat that a few times until it reaches the bus. So can we borrow that idea and use it for the turtle? I don’t see any reason why we can’t. Let’s do that! 

* Whenever you want a sprite to repeatedly do something, always turn to loops. At this point, we have learnt two different types of loops, the repeat loop and the forever loop. One that repeats a fixed number of times and one that repeats forever without stopping. So which one should we use here? To be honest, I’m not so sure at this point. When this is the case, it is always a good idea to start with the simpler of the two. So let’s try the repeat loop. Now, put the move block inside this loop and connect the entire loop to the script. Let’s me change the number of steps to move each time to 5. And for the number of iteration, let’s try 20 for now. So 20 times, each time 5 steps, that’s a total of 100 steps. Let’s see if 100 steps gets our turtle to the ocean.

* Test. Ok, we can now see the turtle slowly moving up. But it stops half way on the beach. So 100 steps is not enough. Looks like we probably need to double it to 200 steps. But before we change the iteration number from 20 to 40, I also think the turtle is moving a bit too fast. So I also want to make the number of steps to move each time smaller, for example, make it 2. If we move 2 steps each time, and we want to move a total of 200 steps, then what should the iteration number be? Yes, 100, because 100 times 2 is 200. So let’s change that to 100. Ok, let’s try again. Yes, I think the speed now looks good, and the turtle is just about reaching the ocean. But if you really want it to be in the ocean, then we will need to move even further. Let’s change the iteration number again from 100 to 120. See if this works. Aha, yes, the turtle is now in the ocean. Goal achieved! So what we can learn from this is that you often don’t arrive at the correct solution on the first go. You need to repeatedly experiment, get feedback and adjust until things start to fit together. This is also often called trial-and-error and it’s one very useful way to learn coding or just anything. So put that into you thinking toolbox! |
| Turtle turns | * Ok, our turtle now moves straight up into the ocean. But if there are other hungry predators on the beach, it is probably not going to survive for very long. We need to be able to control where the turtle is going so that it can avoid running into the predators. That means, we need to be able to make the turtle point and move in all four directions: up down, left and right. Pointing to those directions is simple. All we need is this “point in direction” block and give it the right number of degrees for each direction. Still remember what those degrees are? Yes, up is 0 degree, right is 90 degree, down is 180 degree and left is -90 degree. If we click each block, the turtle points to where we want it to point to. Simple. But again, we won’t be able to click those blocks once the game is started. We need some other way to tell the turtle to change its direction. 

* In other words, we need to be able to control how the turtle move! Aha, this is going to be the first time we do something like this! Previously, we were mostly spectators sitting quietly and watching sprites do their things. But this time, we need to be in control! But first let’s think about the different ways you can control a game character? Anyone who has any experience with playing games wants to share your thoughts? Yes, you can use a joystick, like the Xbox or Playstation. Anything else? Yes, we can also use the mouse to click. And one such example would be the bug finding game we just completed in the last lesson? What else? Yes, the keyboard! For example, a lot games use the four arrow keys to move characters around: press the up arrow key, the character moves up, down arrow key, moves down, left arrow key moves left and right arrow key moves right. For our game here, well, obviously we don’t have a joystick with us, so that option is out of the window. That leaves us with either mouse or keyboard. Actually, this game can be programmed with either one. But since we have already used mouse click a lot in previous lessons, I would love to teach something new here. So let’s see how we can use keyboard keys to control our turtle! 

* Actually, what we really want is to use the four arrows keys on the keyboard to control where the turtle points to. So if I press the up arrow key, the turtle should point straight up, likewise, if I press the down arrow key, they turtle should point straight down. If  I press the left arrow keys, it points to the left and if I press the left arrow key, it points to the right. So instead of clicking those four “point in direction” blocks, we press the arrow keys to change direction. Ok, let’s think about how this can be done. For example, when pointing up, what we want is something like this “When the up arrow key is pressed, point the turtle up”, right? Aha, we are seeing this again “when something happens, do something”! So what does that remind you of? Yes, probably another hat block that can kick start another script to do something. And where are all the hat blocks? Yes, in the Events category. So challenge for you, can you find such a hat block that would just start a script when a keyboard key is pressed? Yes, someone say “when space key pressed” block! That sounds promising, let’s drag it out and take a closer look.

* First thing we notice is that it has a drop down menu. Let’s click it. Now, once it’s open, you can see a very long list. “space”, “up arrow”, “down arrow”, “right arrow”, “left arrow” and letters a, b, c so on and so forth. What do you think these are? Yes, they are just the different keys on our keyboard. For example, if I select “up arrow”, then this hat block becomes “when up arrow key pressed”. Similarly, if I select “left arrow”, then it becomes “when left arrow key pressed”. So you can tell the sprite to do something when any one of those keys in the list is pressed. This is super convenient! For what we want to do here, we basically need the four arrow keys right? So when the up arrow key is pressed, what are we going to do? Yes, we are going to make the turtle point up. So let’s connect the “point in direction 0” block to this hat block. Now, without even starting the game, if you now press the up arrow key on your key board, you can see that this new script lit up, meaning it is run. The reason we don’t see any change is because the turtle is already point up. So let’s try a different one. Drag out another “when space key pressed” block, but this time change the key to “down arrow”. Now connect “point in direction 180” to this hat block. Now, what what the turtle does when I press the down arrow key. Tada!!! It’s now point down! How cool is that. And if I press the up arrow key again, it points back up! Very cool. Ok, how about you go ahead and finish the remaining two directions left and right. OK, everyone figure out how to do it? Yes, it’s pretty simple, just add two more “when space key pressed” blocks, and choose “left arrow” and “right arrow” for them. And connect “point in direction 90” to the right arrow and “point in direction -90” to left arrow. Now we have all four directions. Ok, try to press the arrow keys on your keyboard. What did you see? Yes, the turtle is completely under our control, we can make it point to any one of those four directions we want! 

* Test. Ok, let’s fire the game off and get some fun! Yay! We can now control where the turtle goes. It’s not just heading straight up, we can make it go left, go right or even go back down! This is awesome!

Problem: But did you notice that when the turtle moving in all direction rather than just straight up, it can sometimes stop anywhere on the beach but the ocean. Can you explain why that happens? Yes, this is because our repeat has only 120 iterations and the turtle moves 2 steps each time, this means the maximum distance we can move is 240 steps. It’s enough to go straight to the ocean, but once you start taking detours to avoid enemies, 240 steps is not enough for the turtle to finally reach the ocean. If you pay attention to the script when I run the game again, you can see that it was lit up when the game just started, meaning the repeat loop is running. A few seconds later, it is no longer lit up, meaning the loop has finished and at the same time our turtle also stopped moving. So the turtle always move 240 steps, as soon as that is reached, it stops. Hmmmm…how can solve this problem? Aha, someone just say “we can repeat more!” Ok, that’s might be solution. Let’s try. Say we increase the number of iterations from 120 to 240, double it. So how many total steps the turtle is going to move this time? Yes, 480 steps, that’s 240 * 2 = 480. 

* Test. Let’s run the game. Ok, turn left, turn right….ok we are still moving, clearly the turtle can now move for much longer this time. But oh no, the it stops again. Right, the turtle does indeed move a much longer distance this time. After all, we have changed the total number of steps from 240 to 480, so that’s kind of expected. But we are still having the same problem: the turtle might stop before it gets the to ocean. It just happens much later. So it seems that simply add more iterations to the loop won’t help. What should we try next?

Solution: Ok, remember when we first tried to repeatedly move the turtle, we are faced with two options: either using the repeat loop or using the forever loop. Back then I wasn’t too sure which one to use. So I did the obvious thing, start with the simpler repeat loop. But as we have just seen, this loop doesn’t seem to work. Now, time to turn to the forever loop for some help. Since the problem here is that the turtle will eventually stop even before it reaches the ocean, then how about make it move forever? Then it must be able to get to the ocean no matter how long it takes, right? Sounds like a plan! Let’s replace the repeat loop with a forever loop.

* Test. Ok, let’s see if the turtle can indeed move forever! Start the game and I will just move on the beach aimlessly. Ok, we have been playing for quite a while now, and it does look like the turtle is never going to stop! Ok, I think I have spent enough time on the beach, let get the turtle to the ocean! Yay, we did it! Cool! |
| Move the turtle until reaching the ocean | Problem: Ok, this is way better than stopping somewhere on the beach. But there is still a problem. Now, take a look at the turtle, it is in the ocean, near the top edge of the stage. Ok, it might seem that it has stopped now. But take a look at the script. It is still lit up? Yes! What does that mean? Yes, it means the script is still running? Why? Yes, because we have a forever loop in the script, and remember, a forever loop never stops! So what is happening now is that, the script is still trying to move the turtle 2 steps at a time. But why is the turtle not moving at all? Well, this is because Scratch won’t allow you to move a sprite beyond the edge of the stage. This just prevents the sprite from disappearing from the stage all together. So in summary, the script still trying very hard to move the turtle, it is just that Scratch does not allow it to move any further. So, a weird thing that can happen is, if I now change the direction of the turtle, say if I press the left arrow key, see, the turtle starts moving again! If I press the left arrow key again, it’s going back down, back to the dangerous beach! Oh no, that’s not what we want! Once we are in the ocean, we never want to go back again! So we are in a dilemma here, with the repeat loop, the turtle can stop even before it reaches the ocean; with the forever loop, the turtle never stops moving! What we really want is a middle ground, meaning the turtle should be able to STOP, but only UNTIL it reaches the ocean! In other words, the turtle should repeatedly move 2 steps at a time until it reaches the ocean! 

* Solution: So it seems like we need a third type of loop. This loop is not going to repeat a fixed number of times or just run forever. Instead, it is going to repeat until something happens. Aha, a third type of loop! That’s sounds fun! Now, see if you find such loop in Scratch! Yes, there is a loop called “repeat until” in the Control category! Let’s drag it out and take a closer look. First, it’s clearly a loop because the name has the word “repeat” and it’s also shaped like t-rex mouth where you can put blocks to repeat inside. So definitely a loop. But what is special about it? Well, let’s drag the other two loops out for some comparison. First, to compare it with the “repeat” loop. At a first glance, they look very similar. Of course, once says “repeat” and the other one says “repeat until”. But here is the most important difference: in the repeat loop, there is slot whose shape is a rectangle with rounded corners, right? And actually, all the slots in the all the blocks we have learnt so far are like this. We can put numbers or text inside those slots, right? For example, with say block, you can put a word or some sentence for the sprite to say. Now, take a look at the slot of the “repeat until” loop. Notice any difference? Yes, it’s  a hexagon! Now, unlike a normal slot, you cannot just type in numbers or text in this hexagon slot. You try, and Scratch won’t allow that. So what is supposed to go inside then? Well, remember we say before that you can only put rectangle blocks with rounded corners into rectangle slots with rounded corners. Same rule apply here: you can only put hexagon blocks into hexagon slots! A hexagon block? What is that? OK, we have not learnt or used any hexagon blocks so far in our course. But that does not mean they do not exist! In fact, there are a lot of hexagon blocks in Scratch! Can you find them? Yes, if you inside the Sensing and Operators category, you will see a lot of them. OK, they might not make too much sense to you right now and you certainly have no idea how they can be used. But they are not as scary as them seem. Actually, we can have a quick overview of some them. Of course, we will leant and use a lot of them later in the course. Let’s first take a look at the ones in the Sensing category. Apart from their shapes, do you also notice something else they have in common? Aha, very good, well spotted: they all have question mark at the end! See that? What does that tell you? Yes, it means they are all some kind of questions! For example, this “key pressed” block, it is asking the question “has a key been pressed”? Earlier in the lesson, we have learnt and used the “when key pressed” hat blocks to check if a key on the keyboard is pressed. And the “key pressed” hexagon block is another way to check if a key is pressed. We are not going to show how to use it in this lesson, but we will meet this block later in the course. And there is another special thing about these blocks, they are questions that you can answer with either “Yes” or “No”. Is this key pressed? Well, it’s either yes or no. Another one, is the mouse down, yes or no. 

* Now, let’s turn to the Operators category. Here you will see more hexagon blocks. But unlike those in the Sensing category, most of do not have a question mark at the end. But that does not mean they are not questions. For example, this “greater than” is essentially asking the question “is the number on the left greater than the number on the right?” What would the answer be? Yes, it’s again going to be either “yes” or “no”, depending on the actual numbers you put in both slots. So it is also a question with a yes or no answer. For example, if I put 100 on the left and 50 on the right, what do you think the answer should be? Yes, the answer should be “yes” because 100 is clearly greater than 50. Let’s click the block and see what it gives back. Aha, instead of replying “yes”, it says “true”. Now, what if I change the number of the left to 20. The answer should be “no” this time, right? So let’s click it again, aha, this time we are getting “false” instead of “no”. Hmmm…interesting. But even though this might be the first time you see words like “true” and “false”, you can kind of get the feeling that they are basically the same as “yes” and “no”. If this is what you think, then congratulations, you are absolutely spot on! “true” is the same as “yes” and “false” is the same as “no”. In fact, there is a name for all these hexagon blocks, they are called “Boolean Blocks”. They are blocks that represent conditions that can be either Ture of False. Now, if this drives you crazy, don’t worry, it is just a different way of saying they are hexagon blocks that represent questions whose answer can be either Yes or No. If this make more sense to you or easier to understand, then you can stick with this more informal explanation as long as you understand what they really mean.

* Ok, back to our “repeat until block”. Now, this block is a loop, so it is going to repeat over and over again. But when is it going to stop? Yes, it is going to stop until something happens. Well, what is that something then? What are we waiting for? Yes, we are waiting until the turtle reaches the ocean. So each iteration of the loop, we are going to ask the following question: “has the turtle reached the ocean yet?” If the answer to this question is “No”, then the loop continues. Otherwise, if the answer is “yes”, then the turtle has reached the ocean and there is no need keep moving. We are done and the loop completes. And this question, or condition is what we need to put inside the hexagon slot here. As we have already learnt, such a question is going to be a Boolean block in either the Sensing or Operator category, which happens to have the shape of a hexagon. 

* So the question now becomes, is there a boolean block that asks the question: “has the turtle reached the ocean yet?” Try! Go go the Sensing or Operator category and see you can find anything useful! Any good news? No…I don’t see anything which is even close to the question we want to ask. Ok, we are stuck again! Is our solution wrong? Of course not! We need to have some faith in ourselves! The reason we don’t see a boolean block which asks the question “has the turtle reached the ocean yet?” is because, blocks in Scratch are designed to be useful for all kinds of projects. Just think about it, suppose that we do have a boolean block that asks this question, it is going to be pretty useful here. But it is going to also useful for other people’s games? Games that has nothing to do with either turtle or ocean whatsoever. No, those games will never use such block. So all the blocks in Scratch are carefully designed by the creators so that they can be useful in most cases. They cannot be tied to any particular game or project. 

* So we have to make use of what is given to us. But how on earth can we ask the question “has the turtle reached the ocean” using the existing boolean blocks? Well, as often the case in life, the same question can often be asked in different ways and that’s how you get insights. Right, let me first ask you what is the color of the beach? Ok, there are lighter and darker yellows, but it is mostly yellow, right? Ok, what is the color or the ocean? Again, there are lighter and darker blues, but it is mostly blue, right? Ok, you might be wondering, why all these questions about colors? What does that has to do with our original question? Well, as the turtle moves from the beach to the ocean, the backdrop color changes from yellow to blue right? If you think it this way, then how can tell when the turtle reaches the ocean? Yes, it reaches the ocean when it is touching the blue color, right? Now, the question “has the turtle reached the ocean?” can be reframed as “has the sprite touched color blue?” Now, let’s pause for a minute and see if you can get you head around. Basically, we do not care whether it’s a turtle getting to the ocean or something else, all we care about is whether a sprite touches some kind of color on the stage. 

* Now, if you can make sense of this, then the solution is simply finding a boolean block that asks the question “is a sprite touching some color”. Ok, see if you can find anything useful this time. Aha, yes! There is a boolean block called “touching color” in the Sensing category! Let’s drag it out and take a closer look. From its name, we can tell that it is indeed asking if a sprite is touching some kind of color. What color? Well, it looks like purple here. But if you click that color slot, something pretty familiar pops up. Have we seen this color menu somewhere else? Yes, back in lesson 2: Treasure Hunt when we drew own own backdrop, we have seen those three sliders when clicking the “Fill” option. Still remember what they are used for? Yes, they are used for selecting whatever color you like. By having a different combination of Color, Saturation and Brightness, you can pretty much create any color. So let’s play with those sliders. Our goal is to come up with a blue that is close enough to the blue color of the ocean. So first let’s move the Color sliders to pick  a blueish color. I think 50 is about right. Then it’s a bit dark now, so let me brighten it up by moving the Brightness slider to about 85. Ok, now it looks pretty close. I don’t think I need to mess around with the Saturation slider. Once you are happy with the color just click anywhere in the code area to close the color menu. Now, this block is asking whether the sprite is touching this bright blueish color. 

* Right, we have the condition or the boolean block, we have picked the color we think is right, now it’s finally time to put it into the slot of the “repeat until” loop. Now, what this loop is saying is the following: I’m going to repeatedly run whatever code blocks that are inside me, that’s inside this big mouth. But each time I iterate, I’m going to ask the question: has the sprite touched this blue color yet? If the answer to that question is “no”, then I just continue repeating as if nothing has happened. But if the answer is “yes”, then it is time to finish the loop and continue with whatever code blocks after the loop. Ok, this is one of most difficult block to understand so far in our course. So don’t rush it, take you time and try to really understand what is going on here. Ok, the last thing we need to do is just replace the forever loop with this shiny new “repeat until” loop. Right, so our turtle should keep moving until it finally reaches the ocean. Let’s test this out! 

* Test. Ok, let’s turn, turn turn and then move towards the ocean. And we reach the ocean but … hmmm… just like when we were stilling using the forever loop, the turtle is never stops even when it reaches the ocean! In fact, you can see that the script is still lit up, meaning it is still running. And just like before, if I press the left arrow to make the turtle turn left, it starts moving again! What? Did we just go through all these to be back at square one? But before you try to pull your hair out, let’s calm down and think about it. First of all, I think the logic of the code is fine. I don’t see a flaw there. The reason why the turtle is not stopping at the ocean is most likely because this boolean block or this question for the repeat until loop gives a “no” answer. So even when the the turtle reaches the ocean, it still doesn’t think so. Why? Because it doesn’t think that the turtle has touched this blue color. But why? This color looks almost the same as the color of the ocean, right? Or is it? Remember, when we pick this color, we were just eyeballing it, meaning we use our naked eyes to pick whatever we think is the same. But as we all know, humans are unreliable, same with our eyes, they way we see color is not reliable too. It might look the same to our eyes, but who knows? Can you tell the difference if I just change the Brightness from 85 to 84? No, you can’t, I can’t and nobody can. If we  can’t do this, then how can we say for sure that the color we picked the exactly the same as the color of the ocean? Remember, for this “touching color” to work, the color here needs to be exactly the same as the color of the ocean. Right, what can we do? Ok, do not lose hope, there is way out! Click the color slot and open up the menu again. Below the three sliders, do you see this little icon with an image and a tube at the bottom? It is called a “Color Picker”. What do you think it does? Yes, it picks color. What color does it pick? Well, it can pick any color on the stage. Let’s try it. Click this icon and then move your mouse over to the stage. Now, see any difference? Yes, our mouse has turned into a big magnifying glass. And there is a tiny square in the middle. This is the color picker and the magnifying glass helps you to better see where you are on the stage. Now, to pick any color, just move it to where you want, make sure the little square is over the point where the color is, and just click. For example, if I move it to the sand here and click, see, all three sliders are changed automatically and the color in the “touching color” block is the exact color of the beach. Of course, we are not interested in the beach color, so let’s click the icon again, but this time, let’s move it to the ocean and click. Aha, now the three sliders change again and we have an ocean blue in the “touching color” block. If you now compares the values of those three sliders, you can clearly see that none of them is the same as before. That just once again proves that the blue color we pick with our naked eye is not exactly the same the color of the ocean. Ok, after this change, time to test the code again. OK, turn, turn, turn and move to the ocean, and Boom, see that, the turtle stops as soon as it touches the ocean. And if you take a look at the script, it is no longer lit up, meaning it has also stopped! Awesome! 

* So the code for the turtle is pretty much all done. But before we move on to the crabs, there is just one small thing I would like to add. When the turtle reaches the ocean, we should give the player some indication that this is the end and you have won the game. We could play a sound or just let the turtle say something. I would choose to say something here, and leave the other one as an exercise for you after class. So this is pretty simple, we just need to add a say block right after the “repeat until” loop. And it’s up to you what you want the turtle say. I would just say “Woohoo! I made it!” for 2 seconds. 

* Test. Ok,  “Wahoo! I made it!” and yes, we made it all the way to the ocean! Perfect! |
| Add and move a single Crab | * OK, our turtle can now easily get to the ocean. But unfortunately, most things in life won’t be so easy! Still remember the pictures I showed you at the beginning of this lesson? The journey to ocean is a very dangerous one! Many hungry predators will happily take our poor turtle as a delicious meal! So it’s time for them to step onto the stage! Now, it’s getting serious, the goal is not only to get to the ocean, but also get there without being eaten. In this lesson, I will just add crabs as the enemies, but you are free to add anything that loves eating turtles. 

* Again, since there isn’t a good Crab sprite in the Scratch library, I’ve prepared one for you. It is in the same folder as the turtle. Now, choose “upload sprite”. Once the file explorer is opened, you can see we are already in the “Sprites” folder, this is because we have chosen the turtle before and Scratch remembers where we were last time. Super handy! Now, just double click the crab image and there you go, it’s on the stage now. OK, time to add some code for this bad boy!

*  As always, let’s start with a “when flag clicked” block. Now, just like the turtle, the crab’s original size is way too big. We need to shrink it down. So let’s add a “set size” block and change the size to 20%. Ok, let’s quickly run the game and yeah, the size of the crab looks about right. 

* Right, next, let’s think about how the crab should move. Crabs are pretty low level creatures and they are dumb. So all they can do is moving sideway from left to right and back. They will just do this over and over again without ever stopping. The code for such dumb move should be simple enough. Let’s first drag the crab to somewhere here on the left of the stage and this is where it is going to start. Now, let’s add a “go to” block after the “set size” block so that each time we start the game, the crab is always going to start at this same position. 

* Starting from here, the crab is going to move to the right, hit the right edge, turn back, move to the left, hit the left edge, turn back again and move to the right again. It’s just going to do this over and over again forever. Aha, “forever”! You know what to do right? Yes, without even thinking about anything else, we can just drag out a “forever” loop and snap it to the end of the script! Right, what should we do inside the loop? Yes, we want to move the crab, so let’s add a move block inside. Let’s test this!

* Test. Wow, that was quick! I think moving 10 steps each time is probably a bit too much, let’s change that to 5 steps. Try again, and yeah, this looks more reasonable. “

* Problem: But there is a problem, as soon as the crab reaches the right edge, it gets stuck and never turns back. If you look at the script, it is still lit up, meaning the forever loop is still running. Hmmm…we have seen very similar problem before, right? Can anyone still remember what that was? Yes, in the “Find the Bug” lesson, our distracting Bat was having the same problem! When it reach any edge of the stage, it also got stuck while the script was still running. 

* Solution: So what was the solution then? Yes, we used a block called “If on edge, bounce” so that whenever a sprite hits the edge, it would just bounce back automatically! How about we try the same here? So go to the Motion category, find the “if on edge, bounce” block and add it right after the “move” block. Let’s give this a try!

* Test. The crab moves to the right, hits the left edge and Yes, it turns back and moves to the left again! But there is just a small problem, when it turns back, it also flips upside down! But this is an easy problem to solve, right? Yes, we just need to change its rotation style to “left-right”. There you go. Let’s test it again. Hits right, turns back, no long upside down, hits left turns back and just on and on and on! Very nice! |
| Crab stops with touching turtle | * Problem: Right, we have one scary predator hunting down our turtle now except that it’s not a real predator! Take a look at what happen when our turtle ran into the crab once the game started. See, the crab just passes through the turtle as if it has never seen it! It keeps moving left and right and the turtle keeps moving forward. Well, to be fair, crabs do have pretty poor eyesight, but it can’t be that bad, right? What really should happen when this two bump into each other, is that, first the crab should stop moving, second, the turtle should also stop moving, finally the crab catches the turtle and starts enjoying a delicious meal!  

* Solution: Ok, let’s solve those problems one at a time. First, we need to make the crab stop moving when it collides with the turtle. But right now, why do you think the crab is not stopping? Yes, we use a forever loop to make the crab move left and right forever. So of course it is not going to stop no matter what. Ok, now it looks like forever loop is probably not the best choice here. But what else can we use? 

* Before we answer that question, let’s think back at the turtle again. Our first solution to move the turtle to the ocean was to use a repeat loop with a fixed number of iterations, remember that? Well, that does not really work because the turtle can stop anywhere on the beach before even reaching the ocean. Then we came up with a second solution which is to use a forever loop. With this, the turtle can indeed get to ocean no matter how many turns and twists you have on the beach. That’s good. But then a new problem came up: the turtle never stops! Well, that’s not a surprise, after all, it’s what you get when using a forever loop. Ok, the turtle never stops! Remind me again what problem are we having here with the crab? Yes, the crab never stops! Hmmm…maybe we are experiencing the same problem again! If this is the case, maybe the solution is the same too? Let’s find out! 

* Ok, what did we do to solve the turtle problem? Yes, we replaced the forever loop by a “repeat until” loop! With this new “repeat until” loop, the turtle is going to keep moving until it reaches the ocean, right? And we used the “touching color” to check if it has reached the ocean. But that’s is not super important here. The most important thing is the “repeat until” loop. Now we have a solution that is somewhere between a repeat loop and a forever loop: we are going to repeat over and over again until some condition becomes true, or the answer to some question becomes Yes. Now, let’s get back to the Crab. We do want it to keep moving, but we also want it to stop as soon as it collides with the turtle. In other words, it should only move until it touches the turtle! Now this is very important and let me just repeat it again: it should only move until it touches the turtle! Ok, get that? Do you have some idea what the solution might be? Yes, looks like we need to bring out the “repeat until” loop again! Let’s do that! Ok, let’s replace the forever loop by this new “repeat until” loop. 

* Ok, that’s a first step. But are we done yet? Of course not! See that big empty hole there? Yeah, we need to fill something in! So the loop is going to keep repeating, or the crab is going to keep moving, until what? Yes, until it collides with the turtle! So, just like the turtle case, we need to ask a question at each loop iteration and depending on if the answer is yes or no, we either continue looping or finish the loop. What is the question going to be? Simple, the question should be “has the crab touched the turtle yet?” If the answer is no, we keep looping and moving the crab. If the answer is yes, then we just jump out of the loop and the crab should stop. Ok, what code block can be used the ask this question then? For the turtle, we used “touching color” to ask if it has reached the ocean. What about here? Ok, someone might suggests that we can use the “touching color” block again here. Ok, that’s good. Let’s try that! In the sensing category, let’s drag out a “touching color” block again. Ok, here we have a problem. If you take a closer look at the turtle, it actually has different shades of green, some are lighter and some are darker. So if we want to choose a color to check using the color picker, which one should we pick? Should we pick the color of its legs, what is dark green, or the color of its carapace, which is light green? What do you think? Well, actually, it doesn’t really matter that much. Let me just pick the color of the carapace. So make sure your mouse is over the carapace and then click. Boom, the color is selected for the “touching color” block. Ok, now let’s drop this into the hexagon slot of the “repeat until” loop. 

* Test. Ok, let’s give this a test. The games starts, the turtle is moving up and the two collides with each other. The crab stops! Hooray! Our solution works! Yeah, I know the turtle is not stopping, but that’s the second problem we need to solve later. For now, the crab stops and that’s what we want to achieve! Nice! 

* Problem: Right, we did solve the problem. But like most problems in life, there are good solutions and there are bad solutions. And we should always try our best to find the best solution. So is using “touching color” here a good solution or a bad one? Ok, this is a difficult question. But let’s try to figure it out. I think our turtle sprite looks pretty cute. But let’s say later you find out an even better image for the turtle and decides to use that instead. Let’s see what would happen. Ok, when I should you the folder with all sprite images for this lesson, you might be wonder why do we have two for the turtle. Ok, here is why, I think the second turtle looks even better so I want to use it instead. Ok, since we already have a turtle sprite and all the code for it, there is no need to add another turtle sprite just because you want to make it look different. What can we do instead? Yes, we can just add  a this image as a new costume to the turtle sprite. So let’s select the turtle, click the “Costumes” tab. Now to add a new costume using a local image is pretty simple, just select “upload HD image” and the file explorer pops up. Again, we are already in the Sprite folder. So to add the image “turtle2.png” as a new costume, simply click that image and there you go, it is added for our sprite! Ok, since this costume is selected, if we now click “Code” and go back to the main editor, you can see that the turtle now looks different. Ok, we have just change how the turtle looks and everything should work as before, right? Let’s find out.

* Test. Now, start the game. Oh, no, what is going on here? The crab once again ignores the turtle! It keeps moving as if nothing was in its way! But how can that happen? It was able to stop when touching the turtle 5 mins ago and all we did was just change the turtle’s costume, how can that bring us back to square one? Why? Anyone has any idea why this happened? Aha, yes! The color! Take a took at the “repeat until” loop. It is going to repeat until the crab is touching this light green color? Right? Where did we get this color from? Yes, we got it from the original turtle costume! Ok, now, what has just changed? Yes, the turtle’s costume. And what is the most significant different between this costume and the previous one? Yes, the colors. This new costume has a much darker green, it’s almost have a blue tint. So, if we are still asking the question “has the crab touched the light green color”? What do you think the answer would be even if the crab is indeed touching the turtle? Yes, it going to be a big NO and it will always be No. Why? Because this new costume does have any this light green color anywhere? Now, if the answer is always going to be no, or the condition is always false, then what would this “repeat until” loop do? Yes, it’s just going to repeat forever! Essentially, we are having a forever loop here! Ouch! That’s not good! 

* Solution: So, what can we do to solve this problem? Yes, very good, we can just use the color picker again and choose the color again from this new costume. Ok, now if we run the game again and there you go, the crab stops again as soon as it touches the turtle. Everything works as before! 

* Problem: Ok, someone new to coding might be happy with this solution. But we are different right? We want to be the pro! And a pro has a different perspective and thinks at a higher level. The solution we have works, nothing wrong with that, but is it the best solution we can come up with? Well, to know if it is good or not, let’s put it to the test. What if I had a third turtle costume and I would like to use that instead? Well, we then have to change the color one more time. Ok, some of you might say it’s a bit inconvenient but not a big deal. Ok, then how about this: What if we are going to switch between those costumes as the game is running? Aha, switching costumes means you do not know which color it is going to be right? If you don’t what the color is, then how can you choose one for the “touching color” block? Aha, did you get you? As you can see, the “touching color” solution works well in some cases but falls apart in others. What we want is a solution that can handle as many cases as we can think of. See? This is a how a pro thinks about coding! 

* Solution: Right, so we now know that our solution is probably not the best. But what else can we do? Well, let’s step back and think it through again. We want the crab to stop when it touches the turtle, right? So what we are really interested in it that it touches the turtle, not some kind of color, right? Make sense? Actually, it’s a very common thing in Scratch that we want to check if a sprite is touching another sprite. So instead of asking if the crab is touching some kind of color, what we really should ask is if the crab is touching the turtle, or any other sprite for that matter. Ok, now our task is to find a block that would ask the question “has this sprite touched another sprite?” No more colors! Now, see if you can find it! Aha, very good, someone just say the “touching” block in the Sensing category! Let’s drag it out and take a look! The first thing we notice is that it’s a hexagon block with a question mark at the end, meaning it is also is boolean block asking a question, just like the touching color block. So what question it is asking now? Yes, it’s ask “is this sprite touching the mosue-pointer?” What is a mouse-pointer? Yes, we have been seeing this all the time, it’s this triangle thing on the stage. But we are not interested in knowing if the crab is touching the mouse pointer, right? Fortunately, this is not the only thing you can choose for this block, because it is a dropdown list. Let’s click and open it. Aha, now, we can see a few more options apart from the mouse pointer. There is an option “edge”, what do you think that does? Yes, if we choose that, this block is asking “is the crab touching the edge?” That’s cool and it can be very useful for checking if a sprite is reaching any of the stage edges. We will be using this later in the course. But is this what we want here? Probably not. Let’s move on to the next option “turtle”. Aha, what if we choose that? What question is it asking now? Yes, it is asking “is the crab touching the turtle?”. Wow, that sounds exactly likely what we are looking for! We want to check if the crab is touching the turtle! Awesome! We have found the holy grail! What should we do next? Yes, let’s just kick the “touching color” block out of the “repeat until” loop, and replace it with this “touching turtle” boolean block! Right, this time, if the crab is not touching the turtle sprite, it is going to repeat and continues to move. On the other hand, it it is touching the turtle sprite, then the loop completes and the crab stops. 

* Test. Let’s test this. Start the game, yeah, the crab stops as soon as it touches the turtle. Now, you might say, what’s new about this? Why are you so excited? Haven’t we already solved the problem with the “touching color” block before? Yeah, you are right. But remember the downside of that solution? Yes, it stop working as soon as you change the turtle’s costume unless you also change the color! But watch what happen now if I change the turtle’s costume back to the original one. OK, we are back and we have not changed a single thing in the script. Now, run the game again. Boom, the crab also stops as soon as it touches the turtle with a different costume! 

* So can you see the benefit here? It doesn’t matter what costume we use for the turtle, or even if we switching costume while the game is running, there is no need to change the script and everything still works perfectly. That’s the way how a pro would solve this problem! The more you try to think differently and come up with novel solution, the better programmer and thinker you would become! After all, learning coding isn’t just about learning coding, it’s more about becoming someone who can think deeply and come up with creative solution. Hope everyone of you can get a feel of what this really means after this example. Ok, enough of motivation talk and let’s move on! |
| Turtle stops when touching crab | Problem: Right, we have finally solved the first problem of stopping the Crab! Now, the other side of the coin is how to also stop the turtle! Remember, when the two collide with each other, both of them should be stopped! But right now, when the crab touches or catches the turtle, the turtle just continues to move on until it reaches the ocean. That’s not how nature is supposed to work! Let’s fix it!

* Solution: But before that, let’s first try to understand why the turtle is not stopping. If you take a look back at the  turtle’s “repeat until” loop, can you tell when it is going to finish? Yes, it’s going to finish when it touches the ocean’s blue color, or in other words, when it reaches the ocean. So when the two collide each other, does turtle even know that it’s touching the crab? No! That’s why it is totally unaware of what has just happened and continues on. We need to stop it too! Ok, this can be done is different ways. But since there are still blocks that we have not learnt yet, we will be working on the simplest solution in this lesson. 

* First, do we know how to stop a running Scratch program? Anyone? Yes, there is this big red STOP button above the stage. We have seen before that anytime you click it, it stops everything in your program. I mean everything, each and every sprite is going to stop immediately. We are playing God here. It is as if you have a superpower that can stop everything in the world at your finger tip! Let’s try!

* Test. Start the game again, as the two collide, the crab stops as expected, but if we now click the STOP button, the turtle also stops. Cool!

* So this could be our solution. But there is just one problem: have you, the player, ever clicked anything to stop every characters in a game when it is game over? Just think about it, any game you have ever played? I bet the answer is a big NO. That’s would be silly, the game should stop itself whenever it is game over. Same here, our code should stop everything when the the turtle is caught by the crab without us ever clicking the STOP button! Our code should be the God and have that superpower! Ok, this leaves us with two questions to answer: first who in our game should be the God and second, how can we give it that stop-everything superpower? Let’s take a look. 

* Well, first of all, the God needs to know if a collision has happened. Right, question for you: who knows that right now? Which sprite? Yes, the Crab! It checks if it is touching the turtle repeatedly right? And once that happens, it knows that and stops moving. So the crab should the God. That answers our first question. Next, how can we give the crab the superpower to stop everything, including the turtle? Aha, it’s time to introduce yet another new code block. Let’s go to the Control category. Now do you see a block named “stop all” near the end? Yeah, let’s drag it out! This sounds like the superpower to stop everything! Now, one thing you have probably noticed is that this block has not tube at the bottom. What does that mean? Yes, it means you cannot connect any other blocks to this one. Aha, I think we have seen another case before, can anyone recall what that one was? Yes, the forever loop! It also doesn’t have a tube at the bottom. And why is that? Yes, because the forever loop will just run forever without stopping. So what is a point of adding any other blocks after a non stopping block! But what about this “stop all” block? Well, first let me explain what “stop all” really means. The “all” means every script in this project, including all scripts of the current sprite, all scripts of all other sprites, and all scripts of the backdrop. Remember backdrop can have scripts too! This “stop all” block would just stop all those scripts all at once. No scripts will be run thereafter. Now, we can explain why no blocks can be added after “stop all”: if everything is going to stop, then what is the point of add anything after? Right? Ok, before we figure out where this block should be connected to, there is one more thing I would like to point out. This block actually has a dropdown menu. Current the selected option is “all” so it stops everything like we have just explained. If you click it open, there are two more options: “this script” and “other scripts in sprite”. I will not go into detailed of what these options are and how they can used, we will see them again later in the course.

* Ok, the superpower block is found and the only remaining question is: where to put it? Well, when do you want to stop everything in the game? Yes, when the crab touches the turtle and stops moving. When does that happen? Yes, it happens when this “repeat until” loop finishes. So it’s pretty obvious that we need to put the “stop all” block after the “repeat until” loop. Ok, let’s give this a test!

* Test. Game starts, and collide! See? Now both sprites stopped and the game ends! Our poor turtle has failed to reached the ocean! Of course, our turtle can move and turn to avoid the crab. Aha, this time we made it. Perfect!

* Ok, maybe avoiding one Crab is too simple for our turtle, so we should add more crab. But I will leave that for you to explore on your own after this lesson.  |
| Add more crabs | * Ok, we have a complete game now. There is the player, the enemy and a goal to achieve. However, I do feel that the game is a bit too easy! As soon as we get past the crab, there is nothing stopping us from reaching the ocean. We should make it harder than that! Ok, what things do you think we can do to make it more difficult to play? Ok, these are all very good suggestions. And actually one of you mentioned that we can add more crabs! Yes, indeed, we can add more crabs. 

* For example, you can make two more crabs that also move left to right, but higher up on the stage. So once we pass the first crab, there is a second and a third crab to watch out for. This is going to add so much more fun! But unfortunately, we are running out of time for this lesson, so I think this change is going to be a perfect exercise for you to attempt on your own after class!  |

### Exercises

- Can you make the crab to start at a random x position each time?
- Can you add some sound effect when the crab catches the turtle?
- Can you add some sound effect when the turtle reaches the ocean?
- Can you add two more crabs that also move left and right? Will the game also stop when the turtle touches them?
- Can you make the crabs bounces around on the stage rather than just moving left and right. Does that make the game even harder?
- Currently, when the turtle reaches the ocean, the crabs are still moving. Since this should also be the end of the game, can you make all the crabs stop as well?
- Can you add a timer to time how long it took the turtle to reach the ocean? And also let the turtle say out the total time. Then you can have a competition see who reaches the ocean quickest!
- Try using only the left the right arrow keys to control the turtle. This time the left arrow key is not going to point the turtle to the left, instead, it is going to turn the turtle to the left a small number of degrees, e.g. 15 degrees. Similar, the right arrow is not going to point the turtle to the right, instead, it is going to turn the turtle to the right a small number of degrees. Does that make it easier to control where the turtle is going?